!function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return s(n?n:e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.isRemovableByUser=e.isRemovableByUser||!1,this.onSelect=e.onSelect||o.emptyFunction,this.onRemove=e.onRemove||o.emptyFunction;var t=e.attribute||{};e.id&&(t.id=e.id),e.isFocused&&(t.autofocus=!0),t.type||(t.type="button");var n=new r.Element("button",t);return(0,o.extendObject)(n,this),n.labelElement=new r.Element("span").insertTo(n),e.label?n.labelElement.insertText(e.label):e.labelHTML&&n.labelElement.insert(e.labelHTML),n.addClassName("flagrate flagrate-button"),e.className&&n.addClassName(e.className),n.addEventListener("click",n._onSelectHandler.bind(n),!0),e.isRemovableByUser&&(n.addClassName("flagrate-button-removable"),n._removeButton=new r.Element("button",{type:"button","class":"flagrate-button-remove"}).insertTo(n),n._removeButton.addEventListener("click",n._onRemoveHandler.bind(n),!0)),e.style&&n.setStyle(e.style),e.color&&n.setColor(e.color),e.icon&&n.setIcon(e.icon),e.isDisabled&&n.disable(),n}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Button=void 0,n.createButton=s;var o=e("./util"),r=e("./element"),a=n.Button=i;a.prototype={select:function(){return this._onSelectHandler(null)},disable:function(){return this.addClassName("flagrate-disabled"),this.writeAttribute("disabled",!0),this},enable:function(){return this.removeClassName("flagrate-disabled"),this.writeAttribute("disabled",!1),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},setLabel:function(e){return this.labelElement.updateText(e),this},setLabelHTML:function(e){return this.labelElement.update(e),this},setColor:function(e){var t=this;if("@"===e.charAt(0))t.style.backgroundColor="",t.style.color="",t.addClassName("flagrate-button-color-"+e.slice(1));else if(t.style.backgroundColor=e,/^#[0-9a-f]{6}$/i.test(e)===!0){var n=parseInt(e.slice(1),16);((n>>16)+(n>>8&255)+(255&n))/3>150?t.style.color="black":t.style.color="white"}else t.style.color="";return t._color=e,t},getColor:function(){return this._color||""},setIcon:function(e){var t=this;return t._iconIdentifier=e,e?t.addClassName("flagrate-icon").setStyle({backgroundImage:"url("+e+")"}):t.removeClassName("flagrate-icon").setStyle({backgroundImage:"none"})},getIcon:function(){return this._iconIdentifier||""},_onSelectHandler:function(e){var t=this;if(t.isEnabled()!==!1){if(t._removeButton&&e&&e.layerX){var n=t.getWidth(),i=t.getHeight(),s=null===t._removeButton.getStyle("margin-right")?0:parseInt(t._removeButton.getStyle("margin-right").replace("px",""),10),o=t._removeButton.getWidth(),r=t._removeButton.getHeight(),a=e.layerX,l=e.layerY,u=a>n-s-o&&n-s>a&&l>i-(i-r)/2-r&&i-(i-r)/2>l;if(u)return t._onRemoveHandler(e),t}var c=e;c.targetButton=t,t.onSelect(c,t),t.fire("select",{targetButton:t})}},_onRemoveHandler:function(e){var t=this;if(t.isEnabled()===!0){t.remove();var n=e;n.targetButton=t,t.onRemove(n,t),t.fire("remove",{targetButton:t})}}}},{"./element":7,"./util":28}],2:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.items=e.items||[],this.onSelect=e.onSelect||r.emptyFunction;var t=e.attribute||{};e.id&&(t.id=e.id);var n=new a.Element("div",t);(0,r.extendObject)(n,this),n.addClassName("flagrate flagrate-buttons"),e.className&&n.addClassName(e.className),e.style&&n.setStyle(e.style);for(var i=0,s=e.items.length;s>i;i++)n.push(e.items[i]);return n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()}),n}function o(e){return new c(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Buttons=void 0,n.createButtons=o;var r=e("./util"),a=e("./element"),l=e("./button"),u=i(l),c=n.Buttons=s;c.prototype={push:function(e){var t=this,n=e.onSelect;e.onSelect=function(e,i){n&&n.call(i,e,i),t.onSelect(e,t)};var i=new u.Button(e).insertTo(this);return e.key&&(i.dataset._key=e.key),this},getButtonByKey:function(e){for(var t=this.childNodes,n=0,i=t.length;i>n;n++)if(t[n].dataset._key===e)return t[n];return null},getButtons:function(){return this.childNodes||[]}}},{"./button":1,"./element":7,"./util":28}],3:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t="flagrate-checkbox-"+(++a).toString(10),n=e.attribute||{};n.id=e.id||null,n["class"]=e.className||null;var i=new r.Element("label",n);return i.writeAttribute("for",t),(0,o.extendObject)(i,this),e.label?i.insertText(e.label):e.labelHTML&&i.insert(e.labelHTML),i.addClassName("flagrate flagrate-checkbox"),e.icon&&(i.addClassName("flagrate-icon"),i.setStyle({backgroundImage:"url("+e.icon+")"})),i.onChange=e.onChange||null,i.onCheck=e.onCheck||null,i.onUncheck=e.onUncheck||null,i._input=new r.Element("input",{id:t,type:"checkbox"}),i.insert({top:new r.Element}),i.insert({top:i._input}),i._input.addEventListener("change",function(e){e.stopPropagation();var t=e;t.targetCheckbox=i,i.isChecked()===!0?(i.onCheck&&i.onCheck(t,i),i.fire("check",{targetCheckbox:i})):(i.onUncheck&&i.onUncheck(t,i),i.fire("uncheck",{targetCheckbox:i})),i.onChange&&i.onChange(t,i),i.fire("change",{targetCheckbox:i})}),e.isChecked===!0&&i.check(),e.isFocused===!0&&i.focus(),e.isDisabled===!0&&i.disable(),i}function s(e){return new l(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Checkbox=void 0,n.createCheckbox=s;var o=e("./util"),r=e("./element"),a=0,l=n.Checkbox=i;l.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this._input.writeAttribute("disabled",!0),this},enable:function(){return this.removeClassName("flagrate-disabled"),this._input.writeAttribute("disabled",!1),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},isChecked:function(){return!!this._input.checked},check:function(){return this._input.checked=!0,this},uncheck:function(){return this._input.checked=!1,this}}},{"./element":7,"./util":28}],4:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.attribute||{};e.id&&(t.id=e.id);var n=new a.Element("div",t);return(0,r.extendObject)(n,this),n.addClassName("flagrate flagrate-checkboxes"),e.className&&n.addClassName(e.className),e.style&&n.setStyle(e.style),n.onChange=e.onChange,n._items=[],(e.items||[]).forEach(function(e){var t={};"object"===("undefined"==typeof e?"undefined":o(e))?(0,r.extendObject)(t,e):(t.label="string"==typeof e?e:e.toString(10),t.value=e),t._checkbox=new l.Checkbox(t).insertTo(n),t._checkbox.addEventListener("change",function(e){n.onChange&&n.onChange(e,n)}),n._items.push(t)}),e.isDisabled&&n.disable(),e.values&&n.setValues(e.values),n}function s(e){return new u(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Checkboxes=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.createCheckboxes=s;var r=e("./util"),a=e("./element"),l=e("./checkbox"),u=n.Checkboxes=i;u.prototype={select:function(e){return this._items[e]&&this._items[e]._checkbox.check(),this},deselect:function(e){return this._items[e]&&this._items[e]._checkbox.uncheck(),this},getValues:function(){for(var e=[],t=0,n=this._items.length;n>t;t++)this._items[t]._checkbox.isChecked()===!0&&e.push(this._items[t].value);return e},addValue:function(e){for(var t=0,n=this._items.length;n>t;t++)if(this._items[t].value===e){this.select(t);break}return this},removeValue:function(e){for(var t=0,n=this._items.length;n>t;t++)if(this._items[t].value===e){this.deselect(t);break}return this},setValues:function(e){for(var t=0,n=this._items.length;n>t;t++)-1===e.indexOf(this._items[t].value)?this.deselect(t):this.select(t);return this},selectAll:function(){for(var e=0,t=this._items.length;t>e;e++)this.select(e);return this},deselectAll:function(){return this.setValues([])},enable:function(){for(var e=0,t=this._items.length;t>e;e++)this._items[e]._checkbox.enable();return this.removeClassName("flagrate-disabled"),this},disable:function(){for(var e=0,t=this._items.length;t>e;e++)this._items[e]._checkbox.disable();return this.addClassName("flagrate-disabled"),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")}}},{"./checkbox":3,"./element":7,"./util":28}],5:[function(e,t,n){"use strict";function i(){function e(e){return function(){i.setValue(e),i._textinput.focus(),i.fire("change")}}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.items=t.items||[],this.regexp=t.regexp||null;var n=t.attribute||{};t.id&&(n.id=t.id);var i=new r.Element("div",n);return i._textinput=new u.TextInput({value:t.value,placeholder:t.placeholder,icon:t.icon}).insertTo(i),i._button=new a.Button({onSelect:function(){function t(e){document.body.removeEventListener("click",t),i.parentNode.removeEventListener("click",t),i.off("click",t),r.style.opacity="0",setTimeout(function(){return r.remove()},500),delete i._menu}if(i._menu)return i._menu.remove(),void delete i._menu;for(var n=[],s=0,o=i.items.length;o>s;s++)n.push({label:i.items[s],onSelect:e(i.items[s])});var r=i._menu=new l.Menu({className:"flagrate-combobox-menu",items:n,onSelect:function(){r.remove(),delete i._menu}}).insertTo(i),a=r.getHeight(),u=parseInt(r.getStyle("margin-top").replace("px",""),10),c=i.cumulativeOffset().top,d=-window.pageYOffset+c,h=window.pageYOffset+window.innerHeight-c-i.getHeight();a+u>h&&(d>h?(a+u>d&&(a=d-u-u,r.style.maxHeight=a+"px"),r.addClassName("flagrate-combobox-menu-upper")):(a=h-u-u,r.style.maxHeight=a+"px")),setTimeout(function(){document.body.addEventListener("click",t),i.parentNode.addEventListener("click",t),i.on("click",t)},0)}}).insertTo(i),(0,o.extendObject)(i,this),i.addClassName("flagrate flagrate-combobox"),t.className&&i.addClassName(t.className),t.style&&i.setStyle(t.style),t.isDisabled&&i.disable(),i}function s(e){return new c(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.ComboBox=void 0,n.createComboBox=s;var o=e("./util"),r=e("./element"),a=e("./button"),l=e("./menu"),u=e("./text-input"),c=n.ComboBox=i;c.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this._textinput.disable(),this._button.disable(),this},enable:function(){return this.removeClassName("flagrate-disabled"),this._textinput.enable(),this._button.enable(),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},getValue:function(){return this._textinput.value},setValue:function(e){return this._textinput.value=e,this},setIcon:function(e){return this._textinput.setIcon(e),this},getIcon:function(){return this._textinput.getIcon()},isValid:function(){return this.regexp.test(this.getValue())}}},{"./button":1,"./element":7,"./menu":10,"./text-input":24,"./util":28}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.ContextMenu=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createContextMenu=s;var r=e("./menu"),a=n.ContextMenu=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this._openHandler=this.open.bind(this),this._closeHandler=this.close.bind(this),this.items=t.items||[],this._isShowing=!1,this.setTarget(t.target||document.body)}return o(e,[{key:"setTarget",value:function(e){return this._target&&this._target.removeEventListener("contextmenu",this._openHandler),e.addEventListener("contextmenu",this._openHandler),this._target=e,this}},{key:"open",value:function(e){e&&e.preventDefault&&e.preventDefault(),this._isShowing===!0&&this.close(),this._isShowing=!0,this._menu=new r.Menu({className:"flagrate-context-menu",items:this.items,onSelect:this._closeHandler});var t=0,n=0;return e&&e.clientX&&e.clientY&&(t=e.clientX,n=e.clientY),this._menu.style.opacity="0",this._menu.insertTo(document.body),t+this._menu.getWidth()>window.innerWidth&&(t=t-this._menu.getWidth()+1),n+this._menu.getHeight()>window.innerHeight&&(n=n-this._menu.getHeight()+1),this._menu.style.top=n+"px",this._menu.style.left=t+"px",this._menu.style.opacity="1",document.body.addEventListener("click",this._closeHandler),document.body.addEventListener("mouseup",this._closeHandler),document.body.addEventListener("mousewheel",this._closeHandler),this}},{key:"close",value:function(){document.body.removeEventListener("click",this._closeHandler),document.body.removeEventListener("mouseup",this._closeHandler),document.body.removeEventListener("mousewheel",this._closeHandler),this._isShowing=!1;var e=this._menu;return setTimeout(function(){e&&e.remove&&e.remove()},0),delete this._menu,this}},{key:"visible",value:function(){return this._isShowing}},{key:"remove",value:function(){this._menu&&this.close(),this._target&&this._target.removeEventListener("contextmenu",this._openHandler)}}]),e}()},{"./menu":10}],7:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(){var e=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],t=arguments[1],n=void 0;return l[e]?n=l[e].cloneNode(!1):t&&t.hasOwnProperty("type")||"select"===e?n=document.createElement(e):(n=document.createElement(e),l[e]=n.cloneNode(!1)),(0,a.extendObject)(n,this),t?n.writeAttribute(t):n}function o(e){return function(){return c[e].apply(c,[this].concat(Array.prototype.slice.call(arguments)))}}Object.defineProperty(n,"__esModule",{value:!0}),n.createElement=n.Element=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=e("./util"),l={},u={before:function(e,t){e.parentNode.insertBefore(t,e)},top:function(e,t){e.insertBefore(t,e.firstChild)},bottom:function(e,t){e.appendChild(t)},after:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)}},c=n.Element=s;n.createElement=function(e,t){return new c(e,t)};c.prototype={isFlagrated:!0},c.visible=function(e){return"none"!==e.style.display},c.exists=function(e){if(e.parentNode)for(;null!==(e=e.parentNode);)if(e===document)return!0;return!1},c.toggle=function(e){return c[c.visible(e)?"hide":"show"](e)},c.hide=function(e){return e.style.display="none",e},c.show=function(e){return e.style.display="",e},c.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},c.update=function(e,t){for(var n=e.childNodes.length;n--;)c.remove(e.childNodes[n]);return t?c.isElement(t)===!0?(e.appendChild(t),e):("string"!=typeof t&&(t=t.toString(10)),e.innerHTML=t,e):e},c.updateText=function(e,t){for(var n=e.childNodes.length;n--;)c.remove(e.childNodes[n]);return void 0===t?e:c.isElement(t)===!0&&void 0!==t.toString?c.updateText(e,t.toString()):("string"!=typeof t&&(t=t.toString(10)),e.appendChild(document.createTextNode(t)),e)},c.insert=function(e,t){"string"!=typeof t&&"number"!=typeof t&&c.isElement(t)!==!0||(t={bottom:t});var n=void 0,s=void 0,o=void 0,r=void 0;for(n in t)if(t.hasOwnProperty(n)){if(s=t[n],n=n.toLowerCase(),o=u[n],c.isElement(s)===!0){o(e,s);continue}for("string"!=typeof s&&(s=s.toString(10)),r=new c,r.innerHTML=s,"top"!==n&&"after"!==n||[].concat(i(r.childNodes)).reverse();0!==r.childNodes.length;)o(e,r.childNodes[0])}return e},c.insertText=function(e,t){"string"!=typeof t&&"number"!=typeof t||(t={bottom:t});var n=void 0,i=void 0,s=void 0;for(n in t)t.hasOwnProperty(n)&&(i=t[n],n=n.toLowerCase(),s=u[n],"string"!=typeof i&&(i=i.toString(10)),s(e,document.createTextNode(i)));return e},c.insertTo=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"bottom":arguments[2],i={};return n?i[n]=e:i.bottom=e,c.insert(t,i),e},c.readAttribute=function(e,t){return e.getAttribute(t)},c.writeAttribute=function(e,t,n){var i=void 0;"object"===("undefined"==typeof t?"undefined":r(t))?i=t:(i={},i[t]=void 0===n?!0:n);var s=void 0;for(s in i)i.hasOwnProperty(s)===!0&&(n=i[s],n===!1||null===n?e.removeAttribute(s):n===!0?e.setAttribute(s,s):void 0!==n&&e.setAttribute(s,n));return e},c.getDimensions=function(e){var t=c.getStyle(e,"display");if(t&&"none"!==t)return{width:e.offsetWidth,height:e.offsetHeight};var n={visibility:e.style.visibility,position:e.style.position,display:e.style.display},i={visibility:"hidden",display:"block"};"fixed"!==n.position&&(i.position="absolute"),c.setStyle(e,i);var s={width:e.offsetWidth,height:e.offsetHeight};return c.setStyle(e,n),s},c.getHeight=function(e){return c.getDimensions(e).height},c.getWidth=function(e){return c.getDimensions(e).width},c.cumulativeOffset=function(e){var t=0,n=0;if(e.parentNode)do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:n}},c.cumulativeScrollOffset=function(e){var t=0,n=0;do t+=e.scrollTop||0,n+=e.scrollLeft||0,e=e.parentNode===document.body&&0!==document.documentElement.scrollTop?document.documentElement:e.parentNode;while(e);return{top:t,left:n}},c.hasClassName=function(e,t){return e.className.length>0&&(e.className===t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className))},c.addClassName=function(e,t){return c.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t),e},c.removeClassName=function(e,t){return e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").trim(),e},c.toggleClassName=function(e,t){return c[c.hasClassName(e,t)?"removeClassName":"addClassName"](e,t)},c.getStyle=function(e,t){t="float"===t?"cssFloat":t.replace(/-+([a-z])?/g,function(e,t){return t?t.toUpperCase():""});var n=e.style[t];if(!n||"auto"===n){var i=document.defaultView.getComputedStyle(e,null);n=i&&void 0!==i[t]&&""!==i[t]?i[t]:null}return"opacity"===t?n?parseFloat(n):1:"auto"===n?null:n},c.setStyle=function(e,t){var n=void 0;for(n in t)t.hasOwnProperty(n)&&(e.style["float"===n||"cssFloat"===n?"cssFloat":n]=t[n]);return e},c.on=function(e,t,n,i){return void 0===e._flagrateEvent&&(e._flagrateEvent={}),void 0===e._flagrateEvent[t]&&(e._flagrateEvent[t]=[]),e._flagrateEvent[t].push({listener:n,useCapture:i}),e.addEventListener(t,n,i||!1),e},c.off=function(e,t,n,i){return n?void e.removeEventListener(t,n,i||!1):(void 0===e._flagrateEvent&&(e._flagrateEvent={}),void 0===e._flagrateEvent[t]&&(e._flagrateEvent[t]=[]),e._flagrateEvent[t].forEach(function(n){e.removeEventListener(t,n.listener,n.useCapture||!1)}),e)},c.fire=function(e,t,n){var i=document.createEvent("HTMLEvents");return i.initEvent(t,!0,!0),n&&(0,a.extendObject)(i,n),e.dispatchEvent(i),e},c.emit=c.fire;for(var d in c)d in c.prototype||(c.prototype[d]=o(d));c.extend=function(e){return e.isFlagrated?e:((0,a.extendObject)(e,c.prototype),e)},"object"===("undefined"==typeof HTMLElement?"undefined":r(HTMLElement))?c.isElement=function(e){return e instanceof HTMLElement}:c.isElement=function(e){return!(!e||1!==e.nodeType||"string"!=typeof e.nodeName)}},{"./util":28}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new g(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Form=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createForm=s;var r=e("./util"),a=e("./element"),l=e("./text-input"),u=e("./text-area"),c=e("./combo-box"),d=e("./checkbox"),h=e("./checkboxes"),f=e("./switch"),m=e("./radios"),p=e("./select"),g=n.Form=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this._opt=t,this._fields=[],this._nolabel=!1,this._vertical=!1,this.element=new a.Element("form",{"class":"flagrate flagrate-form"}),this._id="flagrate-form-"+(++e.idCounter).toString(10),t.nolabel===!0&&(this._nolabel=!0),t.vertical===!0&&(this._vertical=!0),this._create(),t.fields&&0!==t.fields.length&&this.push(t.fields)}return o(e,[{key:"insertTo",value:function(e,t){return this.element.insertTo(e,t)&&this}},{key:"on",value:function(e,t,n){return this.element.on(e,t,n)&&this}},{key:"off",value:function(e,t,n){return this.element.off(e,t,n)&&this}},{key:"getResult",value:function(){for(var e={},t=0,n=this._fields.length;n>t;t++){var i=this._fields[t];!i.key&&"string"!=typeof i.pointer||i._dependsIsOk!==!0||null!==i.pointer&&("string"==typeof i.pointer?r.jsonPointer.set(e,i.pointer,i.getVal()):i.key&&(e[i.key]=i.getVal()))}return e}},{key:"validate",value:function(e){function t(){e&&e(!l)}function n(e){e===!1&&(l=!0),i()}function i(){return 0===s.length?t():void s.shift().validate(n)}for(var s=[],o=0,r=this._fields.length;r>o;o++){var a=this._fields[o];a._dependsIsOk===!0&&a.input&&a.input.type&&s.push(a)}var l=!1;return i(),this}},{key:"enable",value:function(){for(var e=0,t=this._fields.length;t>e;e++){var n=this._fields[e];n.input&&n.input.type&&n.input.type.enable.call(n.input)}return this}},{key:"disable",value:function(){for(var e=0,t=this._fields.length;t>e;e++){var n=this._fields[e];n.input&&n.input.type&&n.input.type.disable.call(n.input)}return this}},{key:"getField",value:function(e){for(var t=0,n=this._fields.length;n>t;t++){var i=this._fields[t];if(i.key&&i.key===e)return i}return null}},{key:"push",value:function(e){if(e instanceof Array)for(var t=0,n=e.length;n>t;t++)this._createField(e[t]),this._fields.push(e[t]);else this._createField(e),this._fields.push(e);for(var i=0,s=this._fields.length;s>i;i++)this._collectFieldRefs(this._fields[i]),this._checkFieldDepends(this._fields[i]);return this._requestRender(),this._fields.length}},{key:"splice",value:function(e,t,n){t="undefined"==typeof t?this._fields.length-e:t;for(var i=this._fields.splice(e,t),s=0,o=i.length;o>s;s++)i[s].container&&(i[s].container.remove(),delete i[s].container);if(n){n instanceof Array==!1&&(n=[n]);for(var r=0,a=n.length;a>r;r++)this._createField(n[r]),this._fields.splice(e+r,0,n[r])}for(var l=0,u=this._fields.length;u>l;l++)this._collectFieldRefs(this._fields[l]),this._checkFieldDepends(this._fields[l]);return this._requestRender(),i}},{key:"removeField",value:function(e){var t=[],n=!0;e instanceof Array==!1&&(n=!1,e=[e]);for(var i=0,s=e.length;s>i;i++){var o="number"==typeof e[i]?e[i]:this.indexOf(e[i]);-1!==o&&t.push(this.splice(o,1))}return n?t:t[0]}},{key:"indexOf",value:function(e){if("string"==typeof e){for(var t=-1,n=0,i=this._fields.length;i>n;n++)if(this._fields[n].key===e){t=n;break}return t}return this._fields.indexOf(e)}},{key:"_create",value:function(){return this._opt.id&&this.element.writeAttribute("id",this._opt.id),this._opt.className&&this.element.addClassName(this._opt.className),this._opt.attribute&&this.element.writeAttribute(this._opt.attribute),this._opt.style&&this.element.setStyle(this._opt.style),this._opt.nolabel===!0&&this.element.addClassName("flagrate-form-nolabel"),this._opt.vertical===!0&&this.element.addClassName("flagrate-form-vertical"),this.element.addEventListener("submit",function(e){return e.preventDefault()}),this}},{key:"_requestRender",value:function(){return this._renderTimer&&clearTimeout(this._renderTimer),this._renderTimer=setTimeout(this._render.bind(this),0),this}},{key:"_render",value:function(){for(var e=document.activeElement,t=0,n=this._fields.length;n>t;t++){var i=this._fields[t];i._dependsIsOk===!0?i.container.insertTo(this.element):i.visible()===!0&&i.container.remove()}return e&&(/Trident/.test(window.navigator.userAgent)===!0?setTimeout(function(){e.focus&&e.focus();var t="INPUT"===e.tagName&&("text"===e.type||"password"===e.type||"number"===e.type)||"TEXTAREA"===e.tagName;if(t)if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){var n=e.createTextRange();n.collapse(!1),n.select()}},0):e.focus&&e.focus()),this}},{key:"_collectFieldRefs",value:function(e){if(e._refs=[],"undefined"!=typeof e.point&&(e.pointer=e.point,delete e.point),!e.key&&"string"!=typeof e.pointer)return this;var t=void 0,n=void 0,i=void 0,s=void 0,o=void 0,r=void 0,a=void 0,l=void 0;for(t=0,n=this._fields.length;n>t;t++)if(a=this._fields[t],e!==a&&a.depends&&0!==a.depends.length)for(i=0,s=a.depends.length;s>i;i++){if(a.depends[i]instanceof Array){for(l=!1,o=0,r=a.depends[i].length;r>o;o++){if(a.depends[i][o].key===e.key){l=!0;break}if("string"==typeof a.depends[i][o].point&&(a.depends[i][o].pointer=a.depends[i][o].point,delete a.depends[i][o].point),"string"==typeof a.depends[i][o].pointer){if(a.depends[i][o].pointer===e.pointer){l=!0;break}if(a.depends[i][o].pointer==="/"+e.key){l=!0;break}}}l&&e._refs.push(a);break}if(a.depends[i].key===e.key){e._refs.push(a);break}if("string"==typeof a.depends[i].point&&(a.depends[i].pointer=a.depends[i].point,delete a.depends[i].point),"string"==typeof a.depends[i].pointer){if(a.depends[i].pointer===e.pointer){e._refs.push(a);break}if(a.depends[i].pointer==="/"+e.key){e._refs.push(a);break}}}return this}},{key:"_compareDepend",value:function(e){var t=void 0;if(e.key){var n=this.getField(e.key);if(null!==n){if(!e.op&&!e.tester&&void 0===e.val)return!0;n._dependsIsOk===!0&&(t=n.getVal())}}else{if("string"!=typeof e.pointer)return!0;try{t=r.jsonPointer.get(this.getResult(),e.pointer)}catch(i){}}if("function"==typeof e.tester)return!!e.tester(t,e);if(e.op){if("==="===e.op&&e.val===t)return!0;if("!=="===e.op&&e.val!==t)return!0;if(">="===e.op&&e.val>=t)return!0;if("<="===e.op&&e.val<=t)return!0;if(">"===e.op&&e.val>t)return!0;if("<"===e.op&&e.val<t)return!0;if("in"===e.op&&"undefined"!=typeof t[e.val])return!0}else if(e.val===t)return!0;return!1}},{key:"_checkFieldDepends",value:function(e){var t=e.depends;if(!t||0===t.length)return e._dependsIsOk=!0,!0;var n=!0,i=void 0,s=void 0,o=void 0,r=void 0,a=void 0,l=void 0;for(i=0,s=t.length;s>i;i++)if(a=t[i],a instanceof Array){for(l=!1,o=0,r=a.length;r>o;o++)if(this._compareDepend(a[o])===!0){l=!0;break}if(l===!1){n=!1;break}}else if(this._compareDepend(a)===!1){n=!1;break}return e._dependsIsOk=n,n}},{key:"_createField",value:function(t){var n=this;if(t._dependsIsOk=!t.depends||0===t.depends.length,t.container=new a.Element("div"),t.id&&t.container.writeAttribute("id",t.id),t.className&&t.container.writeAttribute("class",t.className),t.attribute&&t.container.writeAttribute(t.attribute),t.style&&t.container.setStyle(t.style),this._nolabel===!1&&(t.labelElement=new a.Element("label").insertText(t.label||""),new a.Element("div",{"class":"flagrate-form-field-label"}).insert(t.labelElement).insertTo(t.container),t.icon&&(t.labelElement.addClassName("flagrate-icon"),t.labelElement.setStyle({backgroundImage:"url("+t.icon+")"}))),t._input=new a.Element("div").insertTo(t.container),t.input&&t.input.type&&("string"==typeof t.input.type?t.input.type=e.inputType[t.input.type]:t.input.type.create||delete t.input),t.input&&t.input.type&&!function(){var i=t.input;i.id||(i.id="flagrate-form-input-"+ ++e.idCounter),n._nolabel===!1&&t.labelElement.writeAttribute("for",i.id),i.element=i.type.create.call(i),new a.Element("div",{"class":"flagrate-form-field-input"}).insert(i.element).insertTo(t._input),i.element.writeAttribute("id",i.id),i.value?i.val=i.value:i.values&&(i.val=i.values),void 0!==i.val&&i.type.setVal.call(i,i.val),i.style&&i.element.setStyle(i.style),"boolean"==typeof i.toString&&void 0===i.toStr&&(i.toStr=i.toString),i.validators?i.validators.forEach(function(t,n){"string"==typeof t&&(i.validators[n]=e.inputValidator[t])}):i.validators=[],i._result=new a.Element("ul",{"class":"flagrate-form-field-result"}).insertTo(t._input),i.isRequired===!0&&t.container.addClassName("flagrate-required")}(),t.element&&new a.Element("div",{"class":"flagrate-form-field-element"}).insert(t.element).insertTo(t._input),t.html&&new a.Element("div",{"class":"flagrate-form-field-html"}).insert(t.html).insertTo(t._input),t.text&&new a.Element("p",{"class":"flagrate-form-field-text"}).insertText(t.text).insertTo(t._input),t.visible=function(){return null!==t.container.parentNode&&t.container.parentNode===n.element},t.getVal=function(){if(t.input){var e=t.input.type.getVal.call(t.input);return t.input.toStr===!0&&(e=e.toString()),t.input.trim===!0&&"string"==typeof e&&(e=e.trim()),t.input.toNumber===!0&&"number"!=typeof e&&("string"==typeof e?e=parseFloat(e):e instanceof Date?e=e.getTime():"boolean"==typeof e&&(e=e===!0?1:0)),"function"==typeof t.input.transform&&(e=t.input.transform.call(t.input,e)),e}},t.setVal=function(e){return t.input?(t.input.type.setVal.call(t.input,e),t._inputOnChange(),t):t},t.validate=function(e){function n(){""===t.input._result.innerHTML?t.container.removeClassName("flagrate-has-result"):t.container.addClassName("flagrate-has-result"),r?(t.container.removeClassName("flagrate-has-warning"),t.container.removeClassName("flagrate-has-success"),t.container.addClassName("flagrate-has-error")):l?(t.container.removeClassName("flagrate-has-error"),t.container.removeClassName("flagrate-has-success"),t.container.addClassName("flagrate-has-warning")):(t.container.removeClassName("flagrate-has-error"),t.container.removeClassName("flagrate-has-warning"),t.container.addClassName("flagrate-has-success")),t._hasError=r,t._hasWarning=l,e&&e(!r)}function i(e,n){switch(e){case!0:case"success":break;case null:case"warning":l=!0;break;case!1:case"error":r=!0}n&&new a.Element("li").insertText(n).insertTo(t.input._result),s()}function s(){if(0===u.length||r===!0)return n();var e=u.shift();"function"==typeof e?e.call(t.input,o,i):"string"==typeof o&&""!==o?e.regexp.test(o)?i(!0,e.success):i(!1,e.error):i(!0)}var o=t.getVal(),r=!1,l=!1;t.input._result.update(),t.input.isRequired===!0&&(void 0===o?r=!0:o===!1||null===o?r=!0:"number"==typeof o&&isNaN(o)===!0?r=!0:void 0!==o.length&&0===o.length&&(r=!0)),"number"==typeof t.input.min&&("number"==typeof o?t.input.min>o&&(r=!0):"string"==typeof o&&""!==o?t.input.min>parseInt(o,10)&&(r=!0):o instanceof Array&&t.input.min>o.length&&(r=!0)),"number"==typeof t.input.max&&("number"==typeof o?t.input.max<o&&(r=!0):"string"==typeof o&&""!==o?t.input.max<parseInt(o,10)&&(r=!0):o instanceof Array&&t.input.max<o.length&&(r=!0)),t.input.minLength&&t.input.minLength>(o.length||o.toString&&o.toString().length||0)&&"string"==typeof o&&""!==o&&(r=!0),t.input.maxLength&&t.input.maxLength<(o.length||o.toString&&o.toString().length||0)&&(r=!0);var u=[];t.input.validators.forEach(function(e){u.push(e)}),s()},t._checkRefs=function(){for(var e,i=!1,s=0,o=t._refs.length;o>s;s++)e=t._refs[s],e._dependsIsOk!==n._checkFieldDepends(e)&&(e._checkRefs(),i=!0);i===!0&&n._requestRender()},t._inputOnChange=function(){t.validate(),t._checkRefs()},t.input&&t.input.type){var i=t.input.type.changeEvents||["change"];i.forEach(function(e){t.input.element.addEventListener(e,t._inputOnChange)})}return this}}]),e}();g.idCounter=0,g.inputValidator={numeric:{regexp:/^[0-9]+$/},alphanumeric:{regexp:/^[a-z0-9]+$/i}},g.inputType={text:{changeEvents:["change","keyup"],create:function(){return new l.TextInput({placeholder:this.placeholder,icon:this.icon,attribute:{maxlength:this.maxLength}})},getVal:function(){return this.element.getValue()},setVal:function(e){this.element.setValue(e)},enable:function(){
this.element.enable()},disable:function(){this.element.disable()}},password:{changeEvents:["change","keyup"],create:function(){return new l.TextInput({placeholder:this.placeholder,icon:this.icon,attribute:{type:"password",maxlength:this.maxLength}})},getVal:function(){return this.element.getValue()},setVal:function(e){this.element.setValue(e)},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},textarea:{changeEvents:["change","keyup"],create:function(){return new u.TextArea({placeholder:this.placeholder,icon:this.icon,attribute:{maxlength:this.maxLength}})},getVal:function(){return this.element.getValue()},setVal:function(e){this.element.setValue(e)},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},number:{changeEvents:["change","keyup"],create:function(){return new l.TextInput({placeholder:this.placeholder,icon:this.icon,attribute:{type:"number",inputmode:"numeric",min:this.min,max:this.max,maxlength:this.maxLength}})},getVal:function(){return parseFloat(this.element.getValue())},setVal:function(e){this.element.setValue(e)},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},combobox:{changeEvents:["change","keyup"],create:function(){return new c.ComboBox({placeholder:this.placeholder,icon:this.icon,items:this.items,attribute:{maxlength:this.maxLength}})},getVal:function(){return this.element.getValue()},setVal:function(e){this.element.setValue(e)},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},checkbox:{create:function(){return new d.Checkbox({icon:this.icon,label:this.label,labelHTML:this.labelHTML})},getVal:function(){return this.element.isChecked()},setVal:function(e){e?this.element.check():this.element.uncheck()},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},checkboxes:{create:function(){return new h.Checkboxes({items:this.items})},getVal:function(){return this.element.getValues()},setVal:function(e){this.element.setValues(e)},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},"switch":{create:function(){return new f.Switch},getVal:function(){return this.element.isOn()},setVal:function(e){e?this.element.switchOn():this.element.switchOff()},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},radios:{create:function(){return new m.Radios({items:this.items})},getVal:function(){return this.element.getValue()},setVal:function(e){this.element.setValue(e)},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},select:{create:function(){return new p.Select({items:this.items,listView:this.listView,multiple:this.multiple,max:this.max,selectedIndex:this.selectedIndex,selectedIndexes:this.selectedIndexes})},getVal:function(){return this.element.multiple===!0?this.element.getValues():this.element.getValue()},setVal:function(e){this.element.multiple===!1?e=[e]:this.element.deselectAll();for(var t=0,n=e.length,i=this.element.items.length;n>t;t++)for(var s=0;i>s;s++)if(e[t]===this.element.items[s].value){this.element.select(s);break}},enable:function(){this.element.enable()},disable:function(){this.element.disable()}},file:{create:function(){return new a.Element("input",{type:"file",accept:this.accept||(this.acceptTypes?this.acceptTypes.join(","):void 0)})},getVal:function(){return this.element.files[0]},setVal:function(e){this.element.files[0]=e},enable:function(){this.element.writeAttribute("disabled",!1)},disable:function(){this.element.writeAttribute("disabled",!0)}},files:{create:function(){return new a.Element("input",{type:"file",accept:this.accept||(this.acceptTypes?this.acceptTypes.join(","):void 0),multiple:!0})},getVal:function(){return this.element.files},setVal:function(e){this.element.files=e},enable:function(){this.element.writeAttribute("disabled",!1)},disable:function(){this.element.writeAttribute("disabled",!0)}}}},{"./checkbox":3,"./checkboxes":4,"./combo-box":5,"./element":7,"./radios":17,"./select":19,"./switch":21,"./text-area":23,"./text-input":24,"./util":28}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new f(e)}function o(){var e=this;if(void 0!==e.value)return e.value;var t={};for(var n in e.cell)"object"===r(e.cell[n])&&void 0!==e.cell[n].value&&(t[n]=e.cell[n].value);return t}Object.defineProperty(n,"__esModule",{value:!0}),n.Grid=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createGrid=s;var l=e("./element"),u=e("./button"),c=e("./checkbox"),d=e("./toolbar"),h=e("./context-menu"),f=n.Grid=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this._opt=t,this._cols=[],this._rows=[],this._pagePosition=0,this._selectedRows=[],this._sortedByKey=null,this._sortedByAsc=null,this.element=new l.Element("div",{"class":"flagrate flagrate-grid"}),this._head=new l.Element("div",{"class":"flagrate-grid-head"}).insertTo(this.element),this._thead=new l.Element("thead").insertTo(new l.Element("table").insertTo(this._head)),this._tr=new l.Element("tr").insertTo(this._thead),this._body=new l.Element("div",{"class":"flagrate-grid-body"}).insertTo(this.element),this._tbody=new l.Element("tbody").insertTo(new l.Element("table").insertTo(this._body)),this._style=new l.Element("style").insertTo(this.element),this._id="flagrate-grid-"+(++e.idCounter).toString(10),t.id&&this.element.writeAttribute("id",t.id),t.className&&this.element.addClassName(t.className),t.attribute&&this.element.writeAttribute(t.attribute),t.style&&this.element.setStyle(t.style),t.cols&&(this._cols=t.cols),t.rows&&(this._rows=t.rows),void 0===t.colMinWidth&&(t.colMinWidth=16),void 0===t.pagination&&(t.pagination=!1),t.numberOfRowsPerPage||(t.numberOfRowsPerPage=20),void 0===t.fill&&(t.fill=!1),t.headless===!0&&(t.disableSort=!0,t.disableResize=!0,this.element.addClassName("flagrate-grid-headless")),void 0===t.multiSelect&&(t.multiSelect=!1),void 0===t.disableCheckbox&&(t.disableCheckbox=!1),void 0===t.disableSelect&&(t.disableSelect=!1),void 0===t.disableSort&&(t.disableSort=!1),void 0===t.disableResize&&(t.disableResize=!1),this.onSelect=t.onSelect,this.onDeselect=t.onDeselect,this.onClick=t.onClick,this.onDblClick=t.onDblClick,this.onRender=t.onRender,this.onRendered=t.onRendered,this.postProcessOfRow=t.postProcessOfRow,this._create()._requestRender()}return a(e,[{key:"insertTo",value:function(e,t){return this.element.insertTo(e,t)&&this}},{key:"on",value:function(e,t,n){return this.element.on(e,t,n)&&this}},{key:"off",value:function(e,t,n){return this.element.off(e,t,n)&&this}},{key:"select",value:function(e){var t=this,n=void 0;if(Array.isArray(e)===!0)n=e;else{n=[];for(var i=0,s=arguments.length;s>i;i++)n.push(arguments[i])}this._opt.multiSelect===!1&&this.deselectAll();for(var o=function(e,i){var s=n[e];return"number"==typeof s&&(s=t._rows[s]),s.isSelected=!0,s._tr&&s._tr.hasClassName("flagrate-grid-row-selected")===!0?"continue":(t._selectedRows.push(s),s._tr&&s._tr.addClassName("flagrate-grid-row-selected"),s._checkbox&&(s._checkbox.check(),setTimeout(function(){s.isSelected===!0&&s._checkbox.check()},0)),s.onSelect&&s.onSelect.call(t,window.event,s,t),void(t.onSelect&&t.onSelect(window.event,s,t)))},r=0,a=n.length;a>r;r++){o(r,a)}return 0!==this._selectedRows.length&&this._checkbox&&this._checkbox.check(),this.element.fire("change",{targetGrid:this}),this}},{key:"deselect",value:function(e){var t=this,n=void 0;if(Array.isArray(e))n=e;else{n=[];for(var i=0,s=arguments.length;s>i;i++)n.push(arguments[i])}for(var o=function(e,i){var s=n[e];return"number"==typeof s&&(s=t._rows[s]),s.isSelected=!1,s._tr&&s._tr.hasClassName("flagrate-grid-row-selected")===!1?"continue":(t._selectedRows.splice(t._selectedRows.indexOf(s),1),s._tr&&s._tr.removeClassName("flagrate-grid-row-selected"),s._checkbox&&(s._checkbox.uncheck(),setTimeout(function(){s.isSelected===!1&&s._checkbox.uncheck()},0)),s.onDeselect&&s.onDeselect.call(t,window.event,s,t),void(t.onDeselect&&t.onDeselect(window.event,s,t)))},r=0,a=n.length;a>r;r++){o(r,a)}return 0===this._selectedRows.length&&this._checkbox&&this._checkbox.uncheck(),this.element.fire("change",{targetGrid:this}),this}},{key:"selectAll",value:function(){return this.select(this._rows)}},{key:"deselectAll",value:function(){return this.deselect(this._rows)}},{key:"getSelectedRows",value:function(){return this._selectedRows}},{key:"getValues",value:function(){return this._selectedRows.map(function(e){return o.call(e)})}},{key:"sort",value:function(e,t){void 0===t&&(t=!0),this._rows.sort(function(t,n){var i=0,s=0,o=t.cell[e],a=n.cell[e];return i="object"===("undefined"==typeof o?"undefined":r(o))?void 0!==o.sortAlt?o.sortAlt:o.text||o.html||o.element&&o.element.innerHTML||o._div&&o._div.innerHTML||0:o||0,s="object"===("undefined"==typeof a?"undefined":r(a))?void 0!==a.sortAlt?a.sortAlt:a.text||a.html||a.element&&a.element.innerHTML||a._div&&a._div.innerHTML||0:a||0,i===s?0:i>s?1:-1}),t===!1&&this._rows.reverse();for(var n=0,i=this._cols.length;i>n;n++)this._cols[n].key===e?(t?(this._cols[n]._th.addClassName("flagrate-grid-col-sorted-asc"),this._cols[n]._th.removeClassName("flagrate-grid-col-sorted-desc")):(this._cols[n]._th.addClassName("flagrate-grid-col-sorted-desc"),this._cols[n]._th.removeClassName("flagrate-grid-col-sorted-asc")),this._cols[n].isSorted=!0,this._cols[n].isAsc=t,this._sortedByKey=e,this._sortedByAsc=t):(this._cols[n].isSorted&&this._cols[n]._th.removeClassName("flagrate-grid-col-sorted-asc").removeClassName("flagrate-grid-col-sorted-desc"),this._cols[n].isSorted=!1,this._cols[n].isAsc=null);return this._requestRender(),this}},{key:"unshift",value:function(e){if(Array.isArray(e)===!0)for(var t=0,n=e.length;n>t;t++)this._rows.unshift(e[t]);else this._rows.unshift(e);return null===this._sortedByKey?this._requestRender():this.sort(this._sortedByKey,this._sortedByAsc),this._rows.length}},{key:"push",value:function(e){if(Array.isArray(e)===!0)for(var t=0,n=e.length;n>t;t++)this._rows.push(e[t]);else this._rows.push(e);return null===this._sortedByKey?this._requestRender():this.sort(this._sortedByKey,this._sortedByAsc),this._rows.length}},{key:"shift",value:function(e){for(var t=e||1,n=[],i=0,s=this._rows.length;s>i&&t>i;i++)n.push(this._rows.shift());return this._requestRender(),e?n:n[0]}},{key:"pop",value:function(e){for(var t=e||1,n=[],i=0,s=this._rows.length;s>i&&t>i;i++)n.push(this._rows.pop());return this._requestRender(),e?n:n[0]}},{key:"splice",value:function(e,t,n){t="undefined"==typeof t?this._rows.length-e:t;var i=this._rows.splice(e,t);if(n){n instanceof Array==!1&&(n=[n]);for(var s=0,o=n.length;o>s;s++)this._rows.splice(e+s,0,n[s])}return null===this._sortedByKey?this._requestRender():this.sort(this._sortedByKey,this._sortedByAsc),i}},{key:"indexOf",value:function(e,t){return this._rows.indexOf(e,t)}},{key:"removeRow",value:function(e){var t=[],n=!0;e instanceof Array==!1&&(n=!1,e=[e]);for(var i=0,s=e.length;s>i;i++){var o=this.indexOf(e[i]);-1!==o&&t.push(this.splice(o,1))}return n?t:t[0]}},{key:"disable",value:function(){return this.element.addClassName("flagrate-disabled"),this}},{key:"enable",value:function(){return this.element.removeClassName("flagrate-disabled"),this}},{key:"isEnabled",value:function(){return!this.element.hasClassName("flagrate-disabled")}},{key:"_create",value:function(){var e=this;this._opt.disableCheckbox===!1&&this._opt.disableSelect===!1&&this._opt.multiSelect===!0&&(this._checkbox=new c.Checkbox({onCheck:this.selectAll.bind(this),onUncheck:this.deselectAll.bind(this)}).insertTo(new l.Element("th",{"class":"flagrate-grid-cell-checkbox"}).insertTo(this._tr)));for(var t=0,n=this._cols.length;n>t;t++){var i=this._cols[t];i._id=this._id+"-col-"+i.key,i._th=new l.Element("th").insertTo(this._tr),i.id&&i._th.writeAttribute("id",i.id),i.className&&i._th.writeAttribute("class",i.className),i.attribute&&i._th.writeAttribute(i.attribute),i.style&&i._th.setStyle(i.style),i._th.addClassName(i._id);var s=i.width?i.width.toString(10)+"px":"auto";this._style.insertText("."+i._id+"{width:"+s+"}"),i.align&&(i._th.style.textAlign=i.align),i._div=(new l.Element).insertTo(i._th),i.label&&i._div.updateText(i.label),i.icon&&(i._div.addClassName("flagrate-icon"),i._div.setStyle({backgroundImage:"url("+i.icon+")"})),this._opt.disableResize!==!1||i.disableResize||(i._resizeHandle=new l.Element("div",{"class":"flagrate-grid-col-resize-handle"}).insertTo(this.element),i._resizeHandle.onmousedown=this._createResizeHandleOnMousedownHandler(i)),this._opt.disableSort!==!1||i.disableSort||(i._th.addClassName("flagrate-grid-col-sortable"),i._th.onclick=this._createColOnClickHandler(i))}return this._lastCol=new l.Element("th",{"class":this._id+"-col-last"}).insertTo(this._tr),this._style.insertText("."+this._id+"-col-last:after{right:0}"),this._opt.pagination&&(this.element.addClassName("flagrate-grid-pagination"),this._pager=new d.Toolbar({className:"flagrate-grid-pager",items:[{key:"rn",element:new l.Element("span").insertText("-")},{key:"first",element:new u.Button({className:"flagrate-grid-pager-first",onSelect:function(){e._pagePosition=0,e._requestRender()}})},{key:"prev",element:new u.Button({className:"flagrate-grid-pager-prev",onSelect:function(){--e._pagePosition,e._requestRender()}})},{key:"num",element:new l.Element("span",{"class":"flagrate-grid-pager-num"}).insertText("-")},{key:"next",element:new u.Button({className:"flagrate-grid-pager-next",onSelect:function(){++e._pagePosition,e._requestRender()}})},{key:"last",element:new u.Button({className:"flagrate-grid-pager-last",onSelect:function(){e._pagePosition=Math.floor(e._rows.length/e._opt.numberOfRowsPerPage),e._requestRender()}})}]}).insertTo(this.element)),this._opt.fill?(this.element.addClassName("flagrate-grid-fill"),this._body.onscroll=this._createBodyOnScrollHandler()):this.element.onscroll=this._createOnScrollHandler(),this._opt.disableResize===!1&&this._layoutUpdater(),this}},{key:"_layoutUpdater",value:function(){var e=this;this._layoutInterval&&clearInterval(this._layoutInterval),this._layoutInterval=setInterval(function(){return e.element.exists()===!1?void clearInterval(e._layoutInterval):void e._requestUpdateLayout()},1e3)}},{key:"_requestUpdateLayout",value:function(){var e=this;this._layoutWidth!==this.element.clientWidth&&(this._layoutTimer&&clearTimeout(this._layoutTimer),this._layoutTimer=setTimeout(function(){e._layoutWidth=e.element.clientWidth,e._updateLayoutOfCols(),e._updatePositionOfResizeHandles()},0))}},{key:"_requestRender",value:function(){return this._renderTimer&&clearTimeout(this._renderTimer),this._renderTimer=setTimeout(this._render.bind(this),0),this}},{key:"_render",value:function(){if(this.onRender&&this.onRender(this)===!1)return this;var e=this._opt.disableCheckbox===!1&&this._opt.disableSelect===!1&&this._opt.multiSelect===!0,t=void 0,n=void 0,i=void 0,s=void 0,o=void 0,r=void 0,a=void 0,u=void 0,d=void 0,h=this._rows.length,f=this._cols.length;for(this._opt.pagination&&(r=0,a=Math.ceil(h/this._opt.numberOfRowsPerPage),a<=this._pagePosition&&(this._pagePosition=a-1),this._pagePosition<=0&&(this._pagePosition=0),u=this._pagePosition*this._opt.numberOfRowsPerPage,d=u+this._opt.numberOfRowsPerPage),this._tbody.update(),t=0;h>t;t++){if(this._opt.pagination){if(u>t)continue;if(t>=d)break;++r}if(i=this._rows[t],i._tr)i._tr.insertTo(this._tbody);else{for(i._grid=this,i._tr=new l.Element("tr").insertTo(this._tbody),i.id&&(i._tr.id=i.id),i.className&&(i._tr.className=i.className),i.attribute&&i._tr.writeAttribute(i.attribute),i.style&&i._tr.setStyle(i.style),(i.onClick||this.onClick||this._opt.disableSelect===!1)&&(this._opt.disableSelect===!1&&i._tr.addClassName("flagrate-grid-row-selectable"),(i.onClick||this.onClick)&&i._tr.addClassName("flagrate-grid-row-clickable"),i._tr.onclick=this._createRowOnClickHandler(i)),(i.onDblClick||this.onDblClick)&&(i._tr.ondblclick=this._createRowOnDblClickHandler(i)),e&&!i._checkbox&&(i._checkbox=new c.Checkbox({onChange:this._createRowOnCheckHandler(i)}).insertTo(new l.Element("td",{"class":"flagrate-grid-cell-checkbox"}).insertTo(i._tr))),i.isSelected===!0&&this.select(i),n=0;f>n;n++)s=this._cols[n],o=void 0===i.cell[s.key]?i.cell[s.key]={}:i.cell[s.key],"string"!=typeof o&&"number"!=typeof o||(o=i.cell[s.key]={text:o}),o._td?o._td.insertTo(i._tr):(o._td=new l.Element("td").insertTo(i._tr),o.id&&(o._td.id=o.id),o.className&&(o._td.className=o.className),o.attribute&&o._td.writeAttribute(o.attribute),o.style&&o._td.setStyle(o.style),s.align&&(o._td.style.textAlign=s.align),o._td.addClassName(s._id),o._div=(new l.Element).insertTo(o._td),void 0!==o.text&&o._div.updateText(o.text),o.html&&o._div.update(o.html),o.element&&o._div.update(o.element),o.icon&&(o._div.addClassName("flagrate-icon"),o._div.style.backgroundImage="url("+o.icon+")"),o.onClick&&(o._td.addClassName("flagrate-grid-cell-clickable"),o._td.onclick=this._createCellOnClickHandler(o)),o.onDblClick&&(o._td.ondblclick=this._createCellOnDblClickHandler(o)),Object.defineProperties(o,g),o.postProcess&&o.postProcess.call(this,o._td,o,this));i._last||(i._last=new l.Element("td",{"class":this._id+"-col-last"})),i._last.insertTo(i._tr),i.menuItems&&this._updateRowMenu(i,i.menuItems),Object.defineProperties(i,p),i.postProcess&&i.postProcess.call(this,i._tr,i,this),this.postProcessOfRow&&this.postProcessOfRow(i._tr,i,this)}}return this._opt.pagination&&(this._pager.getElementByKey("rn").updateText(u+1+" - "+(u+r)+" / "+h),this._pager.getElementByKey("num").updateText(this._pagePosition+1+" / "+a)),this._opt.disableResize===!1&&(this._opt.fill&&(this._head.style.right=this._body.offsetWidth-this._body.clientWidth+"px",this._head.scrollLeft=this._body.scrollLeft),this._requestUpdateLayout()),this.onRendered&&this.onRendered(this),this}},{key:"_updateRowMenu",value:function(e,t){e._menu&&(e._menu.remove(),delete e._menu),t&&0!==t.length?(e._last.addClassName("flagrate-grid-cell-menu"),e._menu=new h.ContextMenu({target:e._tr,items:t}),e._last.onclick||(e._last.onclick=e._grid._createLastRowOnClickHandler(e))):e._last.removeClassName("flagrate-grid-cell-menu")}},{key:"_updatePositionOfResizeHandles",value:function(){for(var e=this._opt.fill?-this._body.scrollLeft:0,t=void 0,n=0,i=this._cols.length;i>n;n++)t=this._cols[n],t._resizeHandle&&(t._resizeHandle.style.left=t._th.offsetLeft+t._th.getWidth()+e+"px")}},{key:"_updateLayoutOfCols",value:function(e){for(var t=this,n=!0,i=0,s=void 0,o=0,r=this._cols.length;r>o;o++)if(s=this._cols[o],!s.width){var a="auto",l=void 0===s.minWidth?this._opt.colMinWidth:s.minWidth;e?a=e+"px":l>=s._th.getWidth()?(a=l+"px",++i):n=!1,this._style.updateText(this._style.innerHTML.replace(new RegExp("("+s._id+"{width:)([^}]*)}"),"$1"+a+"}"))}n?this.element.addClassName("flagrate-grid-fixed"):this.element.removeClassName("flagrate-grid-fixed"),setTimeout(function(){var s=t._opt.fill?t._body:t.element;t._style.updateText(t._style.innerHTML.replace(new RegExp("("+t._id+"-col-last:after{right:)([^}]*)}"),"$1"+(s.scrollWidth-s.clientWidth-s.scrollLeft)+"px!important}"));var o=t._lastCol.getWidth();n&&!e&&o&&i&&t._updateLayoutOfCols(Math.floor(o/i))},0)}},{key:"_createOnScrollHandler",value:function(){var e=this;return function(t){e._opt.disableResize===!1&&e._updateLayoutOfCols()}}},{key:"_createBodyOnScrollHandler",value:function(){var e=this;return function(t){e._head.style.right=e._body.offsetWidth-e._body.clientWidth+"px",e._head.scrollLeft=e._body.scrollLeft,e._opt.disableResize===!1&&(e._updateLayoutOfCols(),e._updatePositionOfResizeHandles())}}},{key:"_createColOnClickHandler",value:function(e){var t=this;return function(n){t.sort(e.key,!e.isAsc)}}},{key:"_createRowOnClickHandler",value:function(e){var t=this;return function(n){return/firefox/i.test(navigator.userAgent)===!0&&(window.event=n),t.isEnabled()!==!1?(e.onClick&&e.onClick.call(t,n,e,t),t.onClick&&t.onClick(n,e,t),t._opt.disableSelect===!1&&(e.isSelected===!0?t.deselect(e):t.select(e)),e._checkbox&&e._checkbox.focus(),!1):void 0}}},{key:"_createRowOnDblClickHandler",value:function(e){var t=this;return function(n){/firefox/i.test(navigator.userAgent)===!0&&(window.event=n),t.isEnabled()!==!1&&(e.onDblClick&&e.onDblClick.call(t,n,e,t),t.onDblClick&&t.onDblClick(n,e,t))}}},{key:"_createCellOnClickHandler",value:function(e){var t=this;return function(n){t.isEnabled()!==!1&&e.onClick&&e.onClick.call(t,n,e,t)}}},{key:"_createCellOnDblClickHandler",value:function(e){var t=this;return function(n){t.isEnabled()!==!1&&e.onDblClick&&e.onDblClick.call(t,n,e,t)}}},{key:"_createRowOnCheckHandler",value:function(e){var t=this;return function(n){return t.isEnabled()===!1?void(n.targetCheckbox.isChecked()===!0?n.targetCheckbox.uncheck():n.targetCheckbox.check()):void(t._opt.disableSelect===!1&&(e._checkbox.isChecked()===!0?t.select(e):t.deselect(e)))}}},{key:"_createLastRowOnClickHandler",value:function(e){var t=this;return function(n){t.isEnabled()!==!1&&(n.stopPropagation(),e._menu&&e._menu.open(n))}}},{key:"_createResizeHandleOnMousedownHandler",value:function(e){var t=this;return function(n){n.preventDefault();var i=n.clientX,s=i,o=function(t){t.preventDefault();var n=t.clientX-i;i+=n,e._resizeHandle.style.left=parseInt(e._resizeHandle.style.left.replace("px",""),10)+n+"px"},r=function a(n){n.preventDefault(),document.removeEventListener("mousemove",o,!0),document.removeEventListener("mouseup",a,!0);var i=void 0===e.minWidth?t._opt.colMinWidth:e.minWidth,r=n.clientX-s,l=e._th.getWidth()+r;l=e.width=Math.max(l,i),t._style.updateText(t._style.innerHTML.replace(new RegExp("("+e._id+"{width:)([^}]*)}"),"$1"+l+"px}")),t._updateLayoutOfCols(),t._updatePositionOfResizeHandles()};document.addEventListener("mousemove",o,!0),document.addEventListener("mouseup",r,!0)}}},{key:"headless",get:function(){return this.element.hasClassName("flagrate-grid-headless")},set:function(e){e?this.element.addClassName("flagrate-grid-headless"):this.element.removeClassName("flagrate-grid-headless")}},{key:"fill",get:function(){return this.element.hasClassName("flagrate-grid-fill")},set:function(e){e?(this.element.addClassName("flagrate-grid-fill"),this._body.onscroll=this._createBodyOnScrollHandler()):(this.element.removeClassName("flagrate-grid-fill"),this.element.onscroll=this._createOnScrollHandler()),this._requestRender()}},{key:"rows",get:function(){return this._rows},set:function(e){this._rows=e,this._requestRender()}},{key:"sortedByKey",get:function(){return this._sortedByKey}},{key:"sortedByAsc",get:function(){return this._sortedByAsc}},{key:"selectedRows",get:function(){return this.getSelectedRows()},set:function(e){this.select(e)}}]),e}();f.idCounter=0;var m={enumerable:!1},p={_checkbox:m,_grid:m,_last:m,_menu:m,_tr:m,className:m,attribute:m,style:m,postProcess:m,tr:{enumerable:!0,get:function(){return this._tr}},id:{enumerable:!0,get:function(){return this._tr.id||void 0},set:function(e){this._tr.id=e}},menuItems:{enumerable:!0,get:function(){return this._menu?this._menu.items:void 0},set:function(e){this._grid._updateRowMenu(this,e)}}},g={_td:m,_div:m,className:m,attribute:m,style:m,postProcess:m,td:{enumerable:!0,get:function(){return this._td}},div:{enumerable:!0,get:function(){return this._div}},id:{enumerable:!0,get:function(){return this._td.id||void 0},set:function(e){this._td.id=e}},align:{enumerable:!0,get:function(){return this._td.style.textAlign||void 0},set:function(e){this._td.style.textAlign=e}},text:{enumerable:!1,get:function(){return this._div.innerText},set:function(e){this._div.updateText(e)}},html:{enumerable:!1,get:function(){return this._div.innerHTML},set:function(e){this._div.update(e)}},element:{enumerable:!1,get:function(){return this._div.firstChild},set:function(e){this._div.update(e)}},icon:{enumerable:!0,get:function(){return this._div.style.backgroundImage.replace(/(.*url\()([^)]+)(\).*)/,"$2")||void 0},set:function(e){var t=this;e?(t._div.addClassName("flagrate-icon"),t._div.style.backgroundImage="url("+e+")"):(t._div.removeClassName("flagrate-icon"),t._div.style.backgroundImage="")}}}},{"./button":1,"./checkbox":3,"./context-menu":6,"./element":7,"./toolbar":26}],10:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.items=e.items||[],this.onSelect=e.onSelect||r.emptyFunction;var t=e.attribute||{};e.id&&(t.id=e.id);var n=new a.Element("div",t);(0,r.extendObject)(n,this),n.addClassName("flagrate flagrate-menu"),e.className&&n.addClassName(e.className),e.style&&n.setStyle(e.style);for(var i=0,s=e.items.length;s>i;i++)n.push(e.items[i]);return n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()}),n.addEventListener("mouseup",function(e){e.stopPropagation()}),n}function o(e){return new d(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Menu=void 0,n.createMenu=o;var r=e("./util"),a=e("./element"),l=e("./button"),u=i(l),c=e("./buttons"),d=n.Menu=s;d.prototype={push:function(e){var t=this;return"string"==typeof e?new a.Element("hr").insertTo(this):!function(){var n=e.onSelect;e.onSelect=function(e,i){n&&n.call(i,e,i),t.onSelect(e,t)};var i=new u.Button(e).insertTo(t);e.key&&(i.dataset._key=e.key)}(),this},getButtonByKey:c.Buttons.prototype.getButtonByKey,getButtons:c.Buttons.prototype.getButtons}},{"./button":1,"./buttons":2,"./element":7,"./util":28}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new l(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Modal=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createModal=s;var r=e("./element"),a=e("./button"),l=n.Modal=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this._opt=t,this._buttons=[],this._close=this.close.bind(this),this.__onKeydownHandler=this._onKeydownHandler.bind(this),t.target||(t.target=document.body),t.sizing||(t.sizing="flex"),void 0===t.disableCloseButton&&(t.disableCloseButton=!1),void 0===t.disableCloseByMask&&(t.disableCloseByMask=!1),void 0===t.disableCloseByEsc&&(t.disableCloseByEsc=!1),t.description&&(this._opt.description=t.description),t.buttons&&(this._buttons=t.buttons),t.onBeforeClose&&(this.onBeforeClose=t.onBeforeClose),t.onClose&&(this.onClose=t.onClose),t.onShow&&(this.onShow=t.onShow),0===this._buttons.length&&(this._buttons=[{label:"OK",color:"@primary",onSelect:this._close,isFocused:!0}]),this._create()}return o(e,[{key:"setId",value:function(e){return this._container.id=e,this}},{key:"setClassName",value:function(e){return this._container.className=e,this}},{key:"setContent",value:function(e){return this._opt.content=e,this._middle.update(e),this}},{key:"setSizing",value:function(e){return this._container.removeClassName("flagrate-sizing-"+this._opt.sizing),this._container.addClassName("flagrate-sizing-"+e),this._opt.sizing=e,this}},{key:"setElement",value:function(e){return this._opt.element=e,this._content.update(e),this}},{key:"setHTML",value:function(e){return this._opt.html=e,this._content.update(e),this}},{key:"setText",value:function(e){return this._opt.text=e,this._content.updateText(e),this}},{key:"setTitle",value:function(e){return this._opt.title=e,this._title.updateText(e),this}},{key:"setSubtitle",value:function(e){return this._opt.subtitle=e,this._subtitle.updateText(e),this}},{key:"visible",value:function(){return this._container.hasClassName("flagrate-modal-visible")}},{key:"open",value:function(){var e=this;return this.visible()===!0?this:(document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),window.getSelection().removeAllRanges(),this._closingTimer&&clearTimeout(this._closingTimer),r.Element.insert(this._opt.target,this._container),setTimeout(function(){return e._container.addClassName("flagrate-modal-visible")},0),this.onShow&&this.onShow(this),this._positioning(),this._buttons[0]&&this._buttons[0]._button.focus(),window.addEventListener("keydown",this.__onKeydownHandler,!0),this)}},{key:"show",value:function(){return this.open()}},{key:"render",value:function(){return this.open()}},{key:"close",value:function(e){var t=this;return this.visible()===!1?this:(this._container.removeClassName("flagrate-modal-visible"),e&&(e.stopPropagation(),e.preventDefault()),this.onBeforeClose&&this.onBeforeClose(this,e)===!1?this:(clearTimeout(this._positioningTimer),this._closingTimer=setTimeout(function(){return t._container.remove()},1e3),window.removeEventListener("keydown",this.__onKeydownHandler,!0),this.onClose&&this.onClose(this,e),this))}},{key:"getButtonByKey",value:function(e){for(var t=null,n=this._buttons,i=0;i<n.length;i++)if(n[i].key&&n[i].key===e){t=n[i]._button;break}return t}},{key:"getButtons",value:function(){return this._buttons.map(function(e){return e._button})}},{key:"setButtons",value:function(e){return this._buttons=e,this._createButtons(),this}},{key:"_create",value:function(){this._createBase(),this._createModal(),this._createButtons()}},{key:"_createBase",value:function(){this._container=new r.Element("div",{id:this._opt.id,"class":"flagrate flagrate-modal flagrate-sizing-"+this._opt.sizing}),this._opt.className&&this._container.addClassName(this._opt.className),this._opt.target!==document.body&&(this._container.style.position="absolute"),this._obi=(new r.Element).insertTo(this._container),this._opt.disableCloseByMask===!1&&this._container.addEventListener("click",this._close)}},{key:"_createModal",value:function(){this._modal=(new r.Element).insertTo(this._obi),this._modal.addEventListener("click",function(e){return e.stopPropagation()}),this._closeButton=new a.Button({label:"",onSelect:this._close}),this._opt.disableCloseButton===!1&&this._closeButton.insertTo(this._modal),this._header=new r.Element("hgroup").insertTo(this._modal),this._title=new r.Element("h1").insertText(this._opt.title||"").insertTo(this._header),this._subtitle=new r.Element("small").insertText(this._opt.subtitle||"").insertTo(this._header),this._middle=(new r.Element).insertTo(this._modal),this._opt.content?this._middle.insert(this._opt.content):(this._content=(new r.Element).insertTo(this._middle),this._opt.element?this._content.insert(this._opt.element):this._opt.html?this._content.insert(this._opt.html):this._opt.text&&this._content.insertText(this._opt.text)),this._footer=new r.Element("footer").insertTo(this._modal)}},{key:"_createButtons",value:function(){var e=this;this._footer.hasChildNodes()===!0&&this._footer.update(),this._buttons.forEach(function(t){t._button=new a.Button({className:t.className,label:t.label,icon:t.icon,color:t.color,isFocused:t.isFocused||!1,isDisabled:t.isDisabled,onSelect:function(n){t.onSelect?t.onSelect.call(n.targetButton,n,e):t.onClick&&(console.warn("ModalButton#onClick is deprecated. Use ModalButton#onSelect instead."),t.onClick(n,e))}}),t._button.button=t,t.button=t._button,t.disable=t._button.disable.bind(t._button),t.enable=t._button.enable.bind(t._button),t.setColor=t._button.setColor.bind(t._button),e._footer.insert(t._button)})}},{key:"_positioning",value:function(){var e=this,t=-1,n=-1,i=-1,s=-1,o=function r(){t===e._container.getWidth()&&n===e._container.getHeight()&&i===e._modal.getWidth()&&s===e._modal.getHeight()||(t=e._container.getWidth(),
n=e._container.getHeight(),i=e._modal.getWidth(),s=e._modal.getHeight(),"flex"===e._opt.sizing&&(i>=t-20?(e._modal.style.left="0",e._middle.style.width=t+"px",e._middle.style.overflowX="auto"):(e._modal.style.left=Math.floor(t/2-i/2)+"px",e._middle.style.width="",e._middle.style.overflowX="visible"),s>=n-20?(e._obi.style.top="10px",e._obi.style.bottom="10px",e._obi.style.height="",e._middle.style.height=n-e._header.getHeight()-e._footer.getHeight()-20+"px",e._middle.style.overflowY="auto"):(e._obi.style.top=n/2-s/2+"px",e._obi.style.bottom="",e._obi.style.height=s+"px",e._middle.style.height="",e._middle.style.overflowY="visible")),"full"===e._opt.sizing&&(e._modal.style.right="10px",e._modal.style.left="10px",e._middle.style.overflowX="auto",e._obi.style.top="10px",e._obi.style.bottom="10px",e._obi.style.height="",e._middle.style.height=n-e._header.getHeight()-e._footer.getHeight()-20+"px",e._middle.style.overflowY="auto")),e._positioningTimer=setTimeout(r,30)};this._positioningTimer=setTimeout(o,0)}},{key:"_onKeydownHandler",value:function(e){var t=document.activeElement&&document.activeElement.tagName;if(("BODY"===t||"DIV"===t||"BUTTON"===t)&&""===window.getSelection().toString()){var n=!1;9===e.keyCode&&"BUTTON"!==t&&(n=!0,this._closeButton?this._closeButton.focus():this._buttons[0]&&this._buttons[0]._button.focus()),13===e.keyCode&&this._buttons[0]&&"BUTTON"!==t&&(n=!0,this._buttons[0]._button.click()),27===e.keyCode&&this._opt.disableCloseByEsc===!1&&(n=!0,this.close()),n===!0&&(e.stopPropagation(),e.preventDefault())}}},{key:"buttons",get:function(){return this.getButtons()},set:function(e){this.setButtons(e)}},{key:"id",get:function(){return this._container.id},set:function(e){this._container.id=e}},{key:"className",get:function(){return this._container.className},set:function(e){this._container.className=e}},{key:"content",get:function(){return this._content},set:function(e){this.setContent(e)}},{key:"sizing",get:function(){return this._opt.sizing},set:function(e){this.setSizing(e)}},{key:"element",get:function(){return this._opt.element},set:function(e){this.setElement(e)}},{key:"html",get:function(){return this._opt.html},set:function(e){this.setHTML(e)}},{key:"text",get:function(){return this._opt.text},set:function(e){this.setText(e)}},{key:"title",get:function(){return this._opt.title},set:function(e){this.setTitle(e)}},{key:"subtitle",get:function(){return this._opt.subtitle},set:function(e){this.setSubtitle(e)}}]),e}()},{"./button":1,"./element":7}],12:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Notify=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createNotify=s;var r=e("./element"),a=n.Notify=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.target=document.body,this.disableDesktopNotify=!1,this.disableFocusDetection=!1,this.hAlign="right",this.vAlign="bottom",this.hMargin=10,this.vMargin=10,this.spacing=10,this.timeout=5,this.title="Notify",this._notifies=[],t.target&&(this.target=t.target),t.className&&(this.className=t.className),t.disableDesktopNotify&&(this.disableDesktopNotify=t.disableDesktopNotify),t.disableFocusDetection&&(this.disableFocusDetection=t.disableFocusDetection),t.hAlign&&(this.hAlign=t.hAlign),t.vAlign&&(this.vAlign=t.vAlign),t.hMargin&&(this.hMargin=t.hMargin),t.vMargin&&(this.vMargin=t.vMargin),t.spacing&&(this.spacing=t.spacing),t.timeout&&(this.timeout=t.timeout),t.title&&(this.title=t.title),t.icon&&(this.icon=t.icon),this._init()}return o(e,[{key:"create",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=void 0;if(n="string"==typeof t?{text:t}:t,this.disableDesktopNotify===!1){var i=document.hasFocus?document.hasFocus():!1;if(this.disableFocusDetection===!1&&i===!1&&this._createDesktopNotify(n)===!0)return this}var s=n.title||this.title,o=n.message||n.body||n.content||n.text||null,a=n.onClick,l=n.onClose,u=void 0!==n.timeout?n.timeout:this.timeout,c=n.icon||this.icon,d=!0,h=void 0,f=this.hMargin,m=this.vMargin,p=new r.Element("div",{"class":this.className});p.addClassName("flagrate flagrate-notify"),new r.Element("div",{"class":"title"}).insertText(s).insertTo(p),new r.Element("div",{"class":"text"}).insertText(o).insertTo(p);var g=new r.Element("div",{"class":"close"}).update("&#xd7;").insertTo(p);c&&(p.addClassName("flagrate-notify-icon"),new r.Element("div",{"class":"icon"}).setStyle({backgroundImage:"url("+c+")"}).insertTo(p));var _=function(){d!==!1&&(d=!1,p.style.opacity="0",l&&l.call(e),setTimeout(function(){e.target.removeChild(p),e._notifies.splice(e._notifies.indexOf(p),1),e._positioner()},300))};return g.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),d&&_()},!1),p.style.display="none",p.style.position="fixed",p.style[this.hAlign]=f+"px",p.style[this.vAlign]=m+"px",a?(p.style.cursor="pointer",p.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),a.call(e),_()})):p.addEventListener("click",_),this.target.appendChild(p),p.style.display="block",setTimeout(function(){p.style.opacity="1"},10),0!==u&&!function(){var e=function(){d&&_()};h=setTimeout(e,1e3*u),p.addEventListener("mouseover",function(){clearTimeout(h),h=setTimeout(e,1e3*u)})}(),this._notifies.push(p),this._positioner(),this}},{key:"_init",value:function(){this.disableDesktopNotify===!1&&(window.Notification&&window.Notification.permission?"file:"!==location.protocol&&"default"===window.Notification.permission&&this.create({text:"Click here to Activate the Desktop Notifications...",onClick:function(){window.Notification.requestPermission()}}):this.disableDesktopNotify=!0)}},{key:"_createDesktopNotify",value:function(e){var t=this,n=e.title||this.title,i=e.message||e.body||e.content||e.text||null,s=e.onClick,o=e.onClose,r=void 0!==e.timeout?e.timeout:this.timeout,a=e.icon||this.icon,l=!0,u=null,c=void 0;return"granted"!==window.Notification.permission?!1:(u=new window.Notification(n,{icon:a,body:i}),0!==r&&(c=setTimeout(function(){l&&u.close()},1e3*r)),u.addEventListener("click",function(){s&&s.call(t),u.close()}),u.onclose=function(){l=!1,o&&o.call(t)},u.show&&u.show(),!0)}},{key:"_positioner",value:function(){for(var e=this.target===document.body?window.innerHeight||document.body.clientHeight:this.target.offsetHeight,t=0,n=0,i=0,s=this._notifies.length;s>i;i++){var o=this._notifies[i],r=this.vMargin+t,a=this.hMargin+n;o.style[this.hAlign]=r.toString(10)+"px",o.style[this.vAlign]=a.toString(10)+"px",n+=this.spacing+o.offsetHeight,n+o.offsetHeight+this.vMargin+this.spacing>=e&&(n=0,t+=this.spacing+o.offsetWidth)}}}]),e}()},{"./element":7}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new l(e)}function o(e,t){var n=a.Element.cumulativeOffset(e),i=a.Element.cumulativeScrollOffset(e),s=a.Element.getWidth(e),o=a.Element.getHeight(e),r=t.getWidth(),l=t.getHeight(),u=n.left-i.left+Math.round(s/2-r/2),c=n.top-i.top+o;c+l>window.innerHeight?(c=window.innerHeight-c+o,t.removeClassName("flagrate-popover-tail-top"),t.addClassName("flagrate-popover-tail-bottom"),t.style.top="",t.style.bottom=c+"px"):(t.removeClassName("flagrate-popover-tail-bottom"),t.addClassName("flagrate-popover-tail-top"),t.style.top=c+"px",t.style.bottom=""),t.style.left=u+"px"}Object.defineProperty(n,"__esModule",{value:!0}),n.Popover=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createPopover=s;var a=e("./element"),l=n.Popover=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this._isShowing=!1,this._openHandler=this.open.bind(this),this._closeHandler=this.close.bind(this),t.target&&(t.target.isFlagrated||(t.target=a.Element.extend(t.target)),this._target=t.target),t.text&&(this._text=t.text),t.html&&(this._html=t.html),t.element&&(this._element=t.element),t.className&&(this._className=t.className),this._target&&this._target.addEventListener("mouseover",this._openHandler)}return r(e,[{key:"open",value:function(e){var t=this;this._isShowing===!0&&this.close();var n=this._target||document.documentElement;e instanceof Event?(a.Element.isElement(e.target)===!0&&(n=e.target),document.body.addEventListener("click",this._closeHandler),document.body.addEventListener("mouseout",this._closeHandler),document.body.addEventListener("mouseup",this._closeHandler),window.addEventListener("scroll",this._closeHandler)):a.Element.isElement(e)===!0&&(n=e);var i=this._create();return this._positioningTimer=setInterval(function(){a.Element.exists(n)===!0?o(n,i):t.close()},10),this._div.on("click",function(e){return e.stopPropagation()}),this._div.on("mouseup",function(e){return e.stopPropagation()}),this._div.on("mousewheel",function(e){e.stopPropagation(),e.preventDefault()}),o(n,i),this}},{key:"close",value:function(){if(void 0===this._div)return this;clearInterval(this._positioningTimer),document.body.removeEventListener("click",this._closeHandler),document.body.removeEventListener("mouseup",this._closeHandler),document.body.removeEventListener("mouseout",this._closeHandler),window.removeEventListener("scroll",this._closeHandler),this._isShowing=!1;var e=this._div;return e.removeClassName("flagrate-popover-visible"),setTimeout(function(){e&&e.remove&&e.remove()},1e3),delete this._div,this}},{key:"visible",value:function(){return this._isShowing&&!!this._div.hasClassName("flagrate-popover-visible")}},{key:"remove",value:function(){this._div&&this.close(),this._target&&this._target.removeEventListener("mouseover",this._openHandler)}},{key:"setTarget",value:function(e){return this._target===e?this:(e.isFlagrated||(e=a.Element.extend(e)),this._target=e,this._isShowing===!0&&this.open(),this)}},{key:"setText",value:function(e){return this._text===e?this:(this._text=e,this._isShowing===!0&&this._div.updateText(e),this)}},{key:"setHTML",value:function(e){return this._html===e?this:(this._html=e,this._isShowing===!0&&this._div.update(e),this)}},{key:"setElement",value:function(e){return this._element===e?this:(this._element=e,this._isShowing===!0&&this._div.update(e),this)}},{key:"setClassName",value:function(e){return this._className===e?this:(this._isShowing===!0&&this._div.removeClassName(this._className).addClassName(e),this._className=e,this)}},{key:"_create",value:function(){this._isShowing=!0;var e=this._div=new a.Element("div",{"class":"flagrate flagrate-popover"});return this._className&&e.addClassName(this._className),this._text&&e.updateText(this._text),this._html&&e.update(this._html),this._element&&e.update(this._element),e.insertTo(document.body),setTimeout(function(){return e.addClassName("flagrate-popover-visible")},0),e}},{key:"target",get:function(){return this._target},set:function(e){this.setTarget(e)}},{key:"text",get:function(){return this._text},set:function(e){this.setText(e)}},{key:"html",get:function(){return this._html},set:function(e){this.setHTML(e)}},{key:"element",get:function(){return this._element},set:function(e){this.setElement(e)}},{key:"className",get:function(){return this._className},set:function(e){this.setClassName(e)}},{key:"isShowing",get:function(){return this._isShowing},set:function(e){e===!0?this.open():this.close()}}]),e}()},{"./element":7}],14:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.attribute||{};t.id=e.id||null,t["class"]=e.className||null;var n=new r.Element("div",t);return(0,o.extendObject)(n,this),n._value=e.value||0,n._max=e.max||100,n.addClassName("flagrate flagrate-progress"),n._bar=(new r.Element).insertTo(n),n._updateProgress(),n}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Progress=void 0,n.createProgress=s;var o=e("./util"),r=e("./element"),a=n.Progress=i;a.prototype={getValue:function(){return this._value},setValue:function(e){var t=this;return"number"!=typeof e?t:(t._value=Math.max(0,Math.min(t._max,e)),t.fire("change",{targetProgress:t}),t._updateProgress(),t)},getMax:function(){return this._max},setMax:function(e){var t=this;return"number"!=typeof e?t:(t._max=e,t.setValue(t._value),t._updateProgress(),t)},_updateProgress:function(){var e=this,t=Math.max(0,Math.min(100,e._value/e._max*100));e._bar.setStyle({width:t+"%"})}}},{"./element":7,"./util":28}],15:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.label=e.label||"",this.items=e.items||[],this.onOpen=e.onOpen||o.emptyFunction,this.onClose=e.onClose||o.emptyFunction;var t=e.attribute||{};e.id&&(t.id=e.id);var n=new a.Button({attribute:t,label:e.label,icon:e.icon,onSelect:e.onSelect});return(0,o.extendObject)(n,this),n.addEventListener("select",n.open.bind(n)),n.addClassName("flagrate-pulldown"),e.className&&n.addClassName(e.className),new r.Element("span",{"class":"flagrate-pulldown-triangle"}).insertTo(n),e.style&&n.setStyle(e.style),e.color&&n.setColor(e.color),e.isDisabled&&n.disable(),n}function s(e){return new u(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Pulldown=void 0,n.createPulldown=s;var o=e("./util"),r=e("./element"),a=e("./button"),l=e("./menu"),u=n.Pulldown=i;u.prototype={open:function(e){var t=this;if(t._open===!0||t._menu)return void t.close();t._open=!0,t._menu=new r.Element("div",{"class":"flagrate-pulldown-menu"}).insert(new l.Menu({items:t.items,onSelect:function(e){t.onSelect&&t.onSelect(e,t),t.fire("select",{targetPulldown:t})}})),t._menu.style.top=t.offsetTop+t.getHeight()+"px",t._menu.style.left=t.offsetLeft+"px",t.insert({after:t._menu});var n=t._menu.getHeight(),i=parseInt(t._menu.getStyle("margin-top").replace("px",""),10),s=t.cumulativeOffset().top,o=-window.pageYOffset+s,a=window.pageYOffset+window.innerHeight-s-t.getHeight();n+i>a&&(o>a?(n+i>o&&(n=o-i-i,t._menu.style.maxHeight=n+"px"),t._menu.style.top=t.offsetTop-n-2*i+"px"):(n=a-i-i,t._menu.style.maxHeight=n+"px"));var u=function c(e){document.body.removeEventListener("click",c),t.parentNode&&t.parentNode.removeEventListener("click",c),t.removeEventListener("select",c),t.close(e)};return setTimeout(function(){document.body.addEventListener("click",u),t.parentNode&&t.parentNode.addEventListener("click",u),t.addEventListener("select",u)},0),t.onOpen.call(t,e,t),t.fire("open",{targetPulldown:t}),this},close:function(e){var t=this;if(t._open!==!1&&t._menu)return t._open=!1,t._menu.style.opacity="0",setTimeout(function(){t._menu&&(t._menu.remove(),delete t._menu,t.onClose(e,t),t.fire("close",{targetPulldown:t}))},250),this}}},{"./button":1,"./element":7,"./menu":10,"./util":28}],16:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t="flagrate-radio-"+(++a).toString(10),n=e.attribute||{};n.id=e.id||null,n["class"]=e.className||null;var i=new r.Element("label",n);return i.writeAttribute("for",t),(0,o.extendObject)(i,this),e.label?i.insertText(e.label):e.labelHTML&&i.insert(e.labelHTML),i.addClassName("flagrate flagrate-radio"),e.icon&&(i.addClassName("flagrate-icon"),i.setStyle({backgroundImage:"url("+e.icon+")"})),i.onChange=e.onChange||null,i.onCheck=e.onCheck||null,i.onUncheck=e.onUncheck||null,i._input=new r.Element("input",{id:t,type:"radio",name:e.name}),i.insert({top:new r.Element}),i.insert({top:i._input}),i._input.addEventListener("change",function(e){e.stopPropagation();var t=e;t.targetRadio=i,i.isChecked()===!0?(i.onCheck&&i.onCheck(t,i),i.fire("check",{targetRadio:i})):(i.onUncheck&&i.onUncheck(t,i),i.fire("uncheck",{targetRadio:i})),i.onChange&&i.onChange(t,i),i.fire("change",{targetRadio:i})}),e.isChecked===!0&&i.check(),e.isFocused===!0&&i.focus(),e.isDisabled===!0&&i.disable(),i}function s(e){return new l(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Radio=void 0,n.createRadio=s;var o=e("./util"),r=e("./element"),a=0,l=n.Radio=i;l.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this._input.writeAttribute("disabled",!0),this},enable:function(){return this.removeClassName("flagrate-disabled"),this._input.writeAttribute("disabled",!1),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},isChecked:function(){return!!this._input.checked},check:function(){return this._input.checked=!0,this},uncheck:function(){return this._input.checked=!1,this}}},{"./element":7,"./util":28}],17:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t="flagrate-radios-"+(++u).toString(10),n=e.attribute||{};e.id&&(n.id=e.id);var i=new a.Element("div",n);return(0,r.extendObject)(i,this),i.addClassName("flagrate flagrate-radios"),e.className&&i.addClassName(e.className),e.style&&i.setStyle(e.style),i.onChange=e.onChange,i.selectedIndex=e.selectedIndex||-1,i._items=[],(e.items||[]).forEach(function(e,n){var s={};"object"===("undefined"==typeof e?"undefined":o(e))?(0,r.extendObject)(s,e):(s.label="string"==typeof e?e:e.toString(10),s.value=e),s.name=t,s._radio=new l.Radio(s).insertTo(i),s._radio.addEventListener("change",function(e){i.onChange&&i.onChange(e,i)}),s._radio.addEventListener("check",function(e){i.selectedIndex=n}),i._items.push(s)}),e.isDisabled&&i.disable(),i.selectedIndex>-1&&i._items[i.selectedIndex]._radio.check(),i}function s(e){return new c(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Radios=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.createRadios=s;var r=e("./util"),a=e("./element"),l=e("./radio"),u=0,c=n.Radios=i;c.prototype={select:function(e){return void 0!==this._items[e]&&(this.selectedIndex=e,this._items[e]._radio.check()),this},getValue:function(){return-1===this.selectedIndex?void 0:this._items[this.selectedIndex].value},setValue:function(e){for(var t=0,n=this._items.length;n>t;t++)if(this._items[t].value===e){this.select(t);break}return this},enable:function(){for(var e=0,t=this._items.length;t>e;e++)this._items[e]._radio.enable();return this.removeClassName("flagrate-disabled"),this},disable:function(){for(var e=0,t=this._items.length;t>e;e++)this._items[e]._radio.disable();return this.addClassName("flagrate-disabled"),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")}}},{"./element":7,"./radio":16,"./util":28}],18:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.suggester=e.suggester||null,this.onSearch=e.onSearch||l.emptyFunction;var t=e.attribute||{};t.id=e.id||null,t["class"]=e.className||null;var n=new u.Element("div",t);return(0,l.extendObject)(n,this),n.addClassName("flagrate flagrate-search-box"),n._input=new d.TextInput({className:"search-input",value:e.value,placeholder:e.placeholder,icon:e.icon}).insertTo(n),n._button=new c.Button({className:"search-button",onSelect:n.search.bind(n)}).insertTo(n),n._suggest=new u.Element("div",{"class":"search-suggest"}).hide().insertTo(n),n._input.on("keydown",n._onKeydownHandler.bind(n)),n._input.on("keyup",n._onKeyupHandler.bind(n)),n._input.on("focus",n._onFocusHandler.bind(n)),n._input.on("blur",n._onBlurHandler.bind(n)),n._suggest.on("mousedown",function(e){return e.preventDefault()}),e.style&&n.setStyle(e.style),e.isDisabled&&n.disable(),n}function s(e){return new f(e)}function o(e,t){return function(){e._input.setValue(t),e._input.focus()}}function r(e,t){return function(){t.call(e),e._input.blur()}}Object.defineProperty(n,"__esModule",{value:!0}),n.SearchBox=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.createSearchBox=s;var l=e("./util"),u=e("./element"),c=e("./button"),d=e("./text-input"),h=e("./menu"),f=n.SearchBox=i;f.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this._input.disable(),this._button.disable(),this._suggest.hide(),this},enable:function(){return this.removeClassName("flagrate-disabled"),this._input.enable(),this._button.enable(),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},getValue:function(){return this._input.getValue()},setValue:function(e){return this._input.setValue(e),this},search:function(){var e=this.getValue();return this.onSearch(e,this),this.fire("search",e),this._input.blur(),this},suggest:function(){if(!this.suggester)return this;this._suggest.hide();var e=this.getValue(),t=this.suggester(e,this._suggested.bind(this));return void 0!==t&&this._suggested(t),this},focus:function(){this._input.focus()},blur:function(){this._input.blur()},_suggested:function(e){var t=this;if(e){if(0===e.length)return void this._suggest.hide();var n=[];if(e.forEach(function(e){"string"==typeof e&&""!==e.trim()?n.push({label:e.trim(),onSelect:o(t,e.trim())}):"object"===("undefined"==typeof e?"undefined":a(e))&&n.push({label:e.label,icon:e.icon,onSelect:r(t,e.onSelect)})}),0===n.length)return void this._suggest.hide();var i=this._menu=new h.Menu({items:n,onSelect:function(){t._suggest.hide()}});u.Element.addClassName(i.firstChild,"flagrate-search-suggest-selected"),this._suggest.update(i).show();var s=this._suggest.getHeight(),l=parseInt(this._suggest.getStyle("margin-top").replace("px",""),10),c=this.cumulativeOffset().top,d=-window.pageYOffset+c,f=window.pageYOffset+window.innerHeight-c-this.getHeight();s+l>f?d>f?(s+l>d&&(s=d-l-l,this._suggest.style.maxHeight=s+"px"),this._suggest.addClassName("flagrate-search-suggest-upper")):(s=f-l-l,this._suggest.style.maxHeight=s+"px",this._suggest.removeClassName("flagrate-search-suggest-upper")):this._suggest.removeClassName("flagrate-search-suggest-upper"),this._suggest.scrollTop=0}},_onKeydownHandler:function(e){if(27===e.keyCode)this._input.select(),this._suggest.hide();else if(this._suggest.visible()===!0){if(13===e.keyCode){var t=this._menu.getElementsByClassName("flagrate-search-suggest-selected")[0];return void t.click()}if(38!==e.keyCode&&40!==e.keyCode)return;e.preventDefault();for(var n=this._menu.getElementsByTagName("button"),i=0,s=n.length;s>i;i++)if(n[i].hasClassName("flagrate-search-suggest-selected")===!0){(38===e.keyCode&&0!==i||40===e.keyCode&&i+1!==s)&&n[i].removeClassName("flagrate-search-suggest-selected");var o=-1;38===e.keyCode&&0!==i?(n[i-1].addClassName("flagrate-search-suggest-selected"),o=n[i-1].offsetHeight+n[i-1].offsetTop):40===e.keyCode&&i+1!==s&&(n[i+1].addClassName("flagrate-search-suggest-selected"),o=n[i+1].offsetHeight+n[i+1].offsetTop),-1!==o&&(this._suggest.scrollTop=o+4-this._suggest.getHeight());break}}else 13===e.keyCode&&setTimeout(this.search.bind(this),100)},_onKeyupHandler:function(e){this._lastValue!==this.getValue()&&(this._lastValue=this.getValue(),this.suggest())},_onFocusHandler:function(e){setTimeout(this.suggest.bind(this),100)},_onBlurHandler:function(e){var t=this;setTimeout(function(){document.activeElement!==t._suggest&&t._suggest.visible()===!0&&t._suggest.hide()},100)}}},{"./button":1,"./element":7,"./menu":10,"./text-input":24,"./util":28}],19:[function(e,t,n){"use strict";function i(){function e(e){return function(){return s.select(e)}}function t(e){return function(){return s.deselect(e)}}var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.items=n.items||[],this.listView=n.listView||!1,this.multiple=n.multiple||!1,this.max=n.max||-1,this.multiple?this.selectedIndexes=n.selectedIndexes||[]:this.selectedIndex="undefined"==typeof n.selectedIndex?-1:n.selectedIndex;var i=n.attribute||{};n.id&&(i.id=n.id),this.isPulldown=!this.listView&&!this.multiple;for(var s=new a.Element("div",i),c=0,d=this.items.length;d>c;c++)"object"!==o(this.items[c])&&(this.items[c]={label:"string"==typeof this.items[c]?this.items[c]:this.items[c].toString(10),value:this.items[c]});return this.isPulldown?s._pulldown=new l.Pulldown({label:"-",items:[{label:"-",onSelect:e(-1)}].concat(this.items.map(function(t,n){return{label:t.label,labelHTML:t.labelHTML,icon:t.icon,onSelect:e(n)}}))}).insertTo(s):s._grid=new u.Grid({headless:!0,multiSelect:this.multiple,cols:[{key:"label"}],rows:this.items.map(function(n,i){return{cell:{label:{text:n.label,html:n.labelHTML,icon:n.icon}},onSelect:e(i),onDeselect:t(i)}})}).insertTo(s),(0,r.extendObject)(s,this),s.addClassName("flagrate flagrate-select"),s.isPulldown||s.addClassName("flagrate-select-list-view"),n.className&&s.addClassName(n.className),n.style&&s.setStyle(n.style),n.isDisabled&&s.disable(),s.multiple?s.selectedIndexes.forEach(function(e){s.select(e)}):s.selectedIndex>-1&&s.select(s.selectedIndex),s}function s(e){return new c(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Select=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.createSelect=s;var r=e("./util"),a=e("./element"),l=e("./pulldown"),u=e("./grid"),c=n.Select=i;c.prototype={select:function(e){if(this.items.length<=e)return this;if(this.multiple){if(this.max>-1&&this.selectedIndexes.length>=this.max)return this._grid.rows[e].isSelected===!0&&this._grid.deselect(e),this;-1===this.selectedIndexes.indexOf(e)&&this.selectedIndexes.push(e)}else this.selectedIndex=e;return this.isPulldown?(-1===e?(this._pulldown.setLabel("-"),this._pulldown.setIcon(null)):(void 0!==this.items[e].label?this._pulldown.setLabel(this.items[e].label):void 0!==this.items[e].labelHTML&&this._pulldown.setLabelHTML(this.items[e].labelHTML),this._pulldown.setIcon(this.items[e].icon)),this.fire("change")):this._grid.rows[e].isSelected||this._grid.select(e),this},deselect:function(e){if(this.items.length<=e)return this;if(this.multiple){var t=this.selectedIndexes.indexOf(e);-1!==t&&this.selectedIndexes.splice(this.selectedIndexes.indexOf(e),1)}else this.selectedIndex=-1;if(this.isPulldown)this._pulldown.setLabel("-"),this._pulldown.setIcon(null),this.fire("change");else if(this.multiple)this._grid.rows[e].isSelected===!0&&this._grid.deselect(e);else for(var n=0,i=this.items.length;i>n;n++)this._grid.rows[n].isSelected===!0&&this._grid.deselect(n);return this},selectAll:function(){if(this.multiple){this._grid.selectAll(),this.selectedIndexes=[];for(var e=0,t=this.items.length;t>e;e++)this.selectedIndexes.push(e)}return this},deselectAll:function(){return this.multiple?(this._grid.deselectAll(),this.selectedIndexes=[]):this.deselect(),this},disable:function(){return this.addClassName("flagrate-disabled"),this.isPulldown?this._pulldown.disable():this._grid.disable(),this},enable:function(){return this.removeClassName("flagrate-disabled"),this.isPulldown?this._pulldown.enable():this._grid.enable(),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},getValue:function(){return this.selectedIndex>-1?this.items[this.selectedIndex].value:void 0},getValues:function(){for(var e=[],t=0,n=this.selectedIndexes.length;n>t;t++)e.push(this.items[this.selectedIndexes[t]].value);return e}}},{"./element":7,"./grid":9,"./pulldown":15,"./util":28}],20:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new l.Progress(e);return(0,r.extendObject)(t,this),t.addClassName("flagrate-slider"),-1===t.tabIndex&&(t.tabIndex=0),void 0!==window.ontouchstart&&t.addEventListener("touchstart",t._onTouchStartHandler.bind(t)),navigator.pointerEnabled?t.addEventListener("pointerdown",t._onPointerDownHandler.bind(t)):navigator.msPointerEnabled?t.addEventListener("MSPointerDown",t._onPointerDownHandler.bind(t)):t.addEventListener("mousedown",t._onPointerDownHandler.bind(t)),e.isDisabled&&t.disable(),t}function o(e){return new u(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Slider=void 0,n.createSlider=o;var r=e("./util"),a=e("./progress"),l=i(a),u=n.Slider=s;u.prototype={disable:function(){var e=this;return e.dataset.flagrateTabIndex=e.tabIndex.toString(10),e.removeAttribute("tabindex"),e.addClassName("flagrate-disabled")},enable:function(){var e=this,t=parseInt(e.dataset.flagrateTabIndex);return-1!==t&&(e.tabIndex=t),e.removeClassName("flagrate-disabled")},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},_onTouchStartHandler:function(e){this.isEnabled()&&(e.preventDefault(),this._slide(e.touches[0].pageX-this.cumulativeOffset().left,e.touches[0].clientX,"touch"))},_onPointerDownHandler:function(e){this.isEnabled()&&(e.preventDefault(),this._slide(e.offsetX||e.layerX,e.clientX,"pointer"))},_slide:function(e,t,n){var i=this,s=i.getWidth()/i.getMax(),o=function(n){n.preventDefault(),n.touches&&n.touches[0]?(e=e+n.touches[0].clientX-t,t=n.touches[0].clientX):(e=e+n.clientX-t,t=n.clientX),i.setValue(Math.round(e/s)),i.fire("slide",{targetSlider:i})},r=function a(r){r.preventDefault(),"pointer"===n?navigator.pointerEnabled?(document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",a)):navigator.msPointerEnabled?(document.removeEventListener("MSPointerUp",a),document.removeEventListener("MSPointerMove",o)):(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)):"touch"===n&&(document.removeEventListener("touchmove",o),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a)),r.clientX?(e=e+r.clientX-t,i.setValue(Math.round(e/s)),i.fire("slide",{targetSlider:i})):r.touches&&r.touches[0]&&(e=e+r.touches[0].clientX-t,i.setValue(Math.round(e/s)),i.fire("slide",{targetSlider:i}))};"pointer"===n?navigator.pointerEnabled?(document.addEventListener("pointermove",o),document.addEventListener("pointerup",r)):navigator.msPointerEnabled?(document.addEventListener("MSPointerMove",o),document.addEventListener("MSPointerUp",r)):(document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)):"touch"===n&&(document.addEventListener("touchmove",o),document.addEventListener("touchend",r),document.addEventListener("touchcancel",r)),i.setValue(Math.round(e/s)),i.fire("slide",{targetSlider:i})}}},{"./progress":14,"./util":28}],21:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new r.Button({id:e.id,className:e.className,attribute:e.attribute,style:e.style,isFocused:e.isFocused,isDisabled:e.isDisabled});return(0,o.extendObject)(t,this),t.addEventListener("select",t.toggleSwitch.bind(t)),t.addClassName("flagrate-switch"),t.dataset?t.dataset.flagrateSwitchStatus=e.isOn?"on":"off":t.writeAttribute("data-flagrate-switch-status",e.isOn?"on":"off"),t}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Switch=void 0,n.createSwitch=s;var o=e("./util"),r=e("./button"),a=n.Switch=i;a.prototype={isOn:function(){return this.dataset?"on"===this.dataset.flagrateSwitchStatus:"on"===this.readAttribute("data-flagrate-switch-status")},switchOn:function(){return this.dataset?this.dataset.flagrateSwitchStatus="on":this.writeAttribute("data-flagrate-switch-status","on"),this.fire("on",{targetSwitch:this}).fire("change",{targetSwitch:this})},switchOff:function(){return this.dataset?this.dataset.flagrateSwitchStatus="off":this.writeAttribute("data-flagrate-switch-status","off"),this.fire("off",{targetSwitch:this}).fire("change",{targetSwitch:this
})},toggleSwitch:function(){return this.isOn()?this.switchOff():this.switchOn()}}},{"./button":1,"./util":28}],22:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.attribute||{};t.id=e.id,t["class"]="flagrate flagrate-tab",e.fill&&(t["class"]+=" flagrate-tab-fill");var n=new r.Element("div",t);return(0,o.extendObject)(n,this),e.className&&n.addClassName(e.className),e.style&&n.setStyle(e.style),n._tabs=e.tabs||[],n._bodyless=e.bodyless||!1,n._selectedIndex=e.selectedIndex||0,n.onSelect=e.onSelect||null,Object.defineProperties(n,{tabs:{enumerable:!0,get:function(){return n._tabs},set:function(e){n._tabs=e,n._render()}},bodyless:{enumerable:!0,get:function(){return n._bodyless},set:function(e){n._bodyless=e,n.update()._create()._render()}},selectedIndex:{enumerable:!0,get:function(){return n._selectedIndex},set:function(e){n.select(e)}}}),n._create()._render(),n.tabs.length>0&&n.select(n.selectedIndex),n}function s(e){return new l(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Tab=void 0,n.createTab=s;var o=e("./util"),r=e("./element"),a=e("./button"),l=n.Tab=i;l.prototype={select:function(e){var t=this,n="number"==typeof e?e:t.indexOf(e);if(0>n||n>=t._tabs.length)return t;0<=t._selectedIndex&&t._selectedIndex<t._tabs.length&&t._tabs[t._selectedIndex]._button&&t._tabs[t._selectedIndex]._button.removeClassName("flagrate-tab-selected"),t._selectedIndex=n;var i=t._tabs[n];if(!i||!i._button)return t;i._button.addClassName("flagrate-tab-selected"),i.text&&t._body.updateText(i.text),i.html&&t._body.update(i.html),i.element&&t._body.update(i.element);var s=window.event||{};return s.targetTab=t,s.targetTabItem=i,i.onSelect&&i.onSelect.call(t,s,i),t.onSelect&&t.onSelect(s,i),t},unshift:function(e){var t=this;if(e instanceof Array)for(var n=0,i=e.length;i>n;n++)t._tabs.unshift(e);else t._tabs.unshift(e);return t._render(),t._tabs.length},push:function(e){var t=this;if(e instanceof Array)for(var n=0,i=e.length;i>n;n++)t._tabs.push(e);else t._tabs.push(e);return t._render(),t._tabs.length},shift:function(e){for(var t=this,n=e||1,i=[],s=0,o=t._tabs.length;o>s&&n>s;s++)i.push(t._tabs.shift());return t._render(),e?i:i[0]},pop:function(e){for(var t=this,n=e||1,i=[],s=0,o=t._tabs.length;o>s&&n>s;s++)i.push(t._tabs.pop());return t._render(),e?i:i[0]},splice:function(e,t,n){var i=this;t="undefined"==typeof t?this._tabs.length-e:t;var s=i._tabs.splice(e,t);if(n){n instanceof Array==!1&&(n=[n]);for(var o=0,r=n.length;r>o;o++)i._tabs.splice(e+o,0,n[o])}return i._render(),s},removeTab:function(e){var t=this,n=[],i=!0;e instanceof Array==!1&&(i=!1,e=[e]);for(var s=0,o=e.length;o>s;s++){var r="number"==typeof e[s]?e[s]:t.indexOf(e[s]);-1!==r&&n.push(t.splice(r,1))}return i?n:n[0]},indexOf:function(e){var t=this;if("string"==typeof e){for(var n=-1,i=0,s=t._tabs.length;s>i;i++)if(t._tabs[i].key===e){n=i;break}return n}return t._tabs.indexOf(e)},_create:function(){var e=this;return e._head=new r.Element("div",{"class":"flagrate-tab-head"}).insertTo(e),e._bodyless===!0?e._body=new r.Element:e._body=new r.Element("div",{"class":"flagrate-tab-body"}).insertTo(e),e},_render:function(){var e=this;return e._head.update(),e._tabs.forEach(function(t){t._button||(t._button=new a.Button({icon:t.icon,label:t.label,onSelect:e._createOnSelectHandler(t)})),t._button.insertTo(e._head)}),e},_createOnSelectHandler:function(e){var t=this;return function(n){/firefox/i.test(navigator.userAgent)===!0&&(window.event=n),t.select(e)}}}},{"./button":1,"./element":7,"./util":28}],23:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.regexp=e.regexp||null;var t=e.attribute||{};e.id&&(t.id=e.id),e.placeholder&&(t.placeholder=e.placeholder);var n=new r.Element("textarea",t);return(0,o.extendObject)(n,this),n.addClassName("flagrate flagrate-textarea"),e.className&&n.addClassName(e.className),e.style&&n.setStyle(e.style),e.icon&&n.setIcon(e.icon),e.value&&n.setValue(e.value),e.isDisabled&&n.disable(),n}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.TextArea=void 0,n.createTextArea=s;var o=e("./util"),r=e("./element"),a=n.TextArea=i;a.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this.writeAttribute("disabled",!0),this},enable:function(){return this.removeClassName("flagrate-disabled"),this.writeAttribute("disabled",!1),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},setValue:function(e){return this.value=e,this},getValue:function(){return this.value},setIcon:function(e){return this._iconIdentifier=e,e?this.addClassName("flagrate-icon").setStyle({backgroundImage:"url("+e+")"}):this.removeClassName("flagrate-icon").setStyle({backgroundImage:"none"})},getIcon:function(){return this._iconIdentifier||""},isValid:function(){return this.regexp.test(this.getValue())}}},{"./element":7,"./util":28}],24:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.regexp=e.regexp||null;var t=e.attribute||{};e.id&&(t.id=e.id),e.value&&(t.value=e.value),e.placeholder&&(t.placeholder=e.placeholder);var n=new r.Element("input",t);return(0,o.extendObject)(n,this),n.addClassName("flagrate flagrate-textinput"),e.className&&n.addClassName(e.className),e.style&&n.setStyle(e.style),e.icon&&n.setIcon(e.icon),e.isDisabled&&n.disable(),n}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.TextInput=void 0,n.createTextInput=s;var o=e("./util"),r=e("./element"),a=n.TextInput=i;a.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this.writeAttribute("disabled",!0),this},enable:function(){return this.removeClassName("flagrate-disabled"),this.writeAttribute("disabled",!1),this},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},setValue:function(e){return this.value=e,this},getValue:function(){return this.value},setIcon:function(e){return this._iconIdentifier=e,e?this.addClassName("flagrate-icon").setStyle({backgroundImage:"url("+e+")"}):this.removeClassName("flagrate-icon").setStyle({backgroundImage:"none"})},getIcon:function(){return this._iconIdentifier||""},isValid:function(){return this.regexp.test(this.getValue())}}},{"./element":7,"./util":28}],25:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.values=e.values||[],this.max=e.max||-1,this.tokenize=e.tokenize||e.tokenizeSync||r.identity,e.onChange&&(this.onChange=e.onChange);var t=e.attribute||{};e.id&&(t.id=e.id);var n=new a.Element("div",t);return(0,r.extendObject)(n,this),n.addClassName("flagrate flagrate-tokenizer"),e.className&&n.addClassName(e.className),n._tokens=new a.Element("span").insertTo(n),n._input=new c.TextInput({placeholder:e.placeholder}).insertTo(n),0!==n.values.length&&n._updateTokens(),n.addEventListener("click",n._onClickHandler.bind(n)),n._input.addEventListener("keydown",n._onKeydownHandler.bind(n)),n._input.addEventListener("focus",n._onFocusHandler.bind(n)),n._input.addEventListener("blur",n._onBlurHandler.bind(n)),e.style&&n.setStyle(e.style),e.icon&&n.setIcon(e.icon),e.isDisabled&&n.disable(),n}function s(e){return new d(e)}function o(e,t){return function(n){(e.max<0||e.max>e.values.length)&&e.values.push(t),e._updateTokens(),e.onChange&&e.onChange(n,this)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Tokenizer=void 0,n.createTokenizer=s;var r=e("./util"),a=e("./element"),l=e("./button"),u=e("./menu"),c=e("./text-input"),d=n.Tokenizer=i;d.prototype={disable:function(){return this.addClassName("flagrate-disabled"),this._input.disable(),this._updateTokens()},enable:function(){return this.removeClassName("flagrate-disabled"),this._input.enable(),this._updateTokens()},isEnabled:function(){return!this.hasClassName("flagrate-disabled")},setValues:function(e){return this.values=e,this._updateTokens()},getValues:function(){return this.values},removeValues:function(){return this.values=[],this._updateTokens()},removeValue:function(e){return this.values.splice(this.values.indexOf(e),1),this._updateTokens()},setIcon:function(e){return this._iconIdentifier=e,e?this.addClassName("flagrate-icon").setStyle({backgroundImage:"url("+e+")"}):this.removeClassName("flagrate-icon").setStyle({backgroundImage:"none"}),this._updateTokens()},getIcon:function(){return this._iconIdentifier||""},focus:function(){this._input.focus()},_updateTokens:function(){var e=this;e._tokens.update(),e.values.forEach(function(t){var n=void 0;n="string"==typeof t?t:t.label,new l.Button({isDisabled:e.isEnabled()===!1,isRemovableByUser:e.isEnabled(),onRemove:function(){return e.removeValue(t)},label:n}).insertTo(e._tokens)});var t=e.getWidth(),n=null===e.getStyle("border-width")?2:parseInt(e.getStyle("border-width").replace("px",""),10),i=null===e.getStyle("padding-left")?4:parseInt(e.getStyle("padding-left").replace("px",""),10),s=null===e.getStyle("padding-right")?4:parseInt(e.getStyle("padding-right").replace("px",""),10),o=e._tokens.getWidth(),r=null===e._tokens.getStyle("margin-left")?2:parseInt(e._tokens.getStyle("margin-left").replace("px",""),10),a=null===e._input.getStyle("margin-left")?2:parseInt(e._input.getStyle("margin-left").replace("px",""),10),u=null===e._input.getStyle("padding-left")?2:parseInt(e._input.getStyle("padding-left").replace("px",""),10),c=t-i-s-o-r-a-u-2*n-2;return c>30?e._input.style.width=c+"px":-5>c?e._input.style.width="":e._input.style.width="100%",e.fire("change"),this},_tokenize:function(){this._candidates=[];var e=this._input.value,t=this.tokenize(e,this._tokenized.bind(this));return void 0!==t&&this._tokenized(t),this._lastTokenizedValue=this._input.value,this},_tokenized:function(e){e instanceof Array==!1&&(e=[e]),this._candidates=[];var t=new u.Menu({onSelect:function(){return t.remove()}});t.style.left=this._input.offsetLeft+"px";for(var n,i,s=0,r=e.length;r>s;s++){if(n=e[s],"string"==typeof n){if(""===n)continue;i={label:n}}else i=n;i.onSelect&&(i._onSelect=i.onSelect),i.onSelect=o(this,n),this._candidates.push(n),t.push(i)}return this._menu&&this._menu.remove(),0!==this._candidates.length&&(this.insert({top:t}),this._menu=t),this},_onClickHandler:function(){this.focus()},_onKeydownHandler:function(e){var t=this;if(13===e.keyCode&&this._lastTokenizedValue!==this._input.value)return e.stopPropagation(),e.preventDefault(),this._lastTokenizedValue=this._input.value,void this._tokenize();if(this._candidates&&0!==this._candidates.length&&(13!==e.keyCode&&39!==e.keyCode||(e.stopPropagation(),e.preventDefault(),this._input.value="",(this.max<0||this.max>this.values.length)&&this.values.push(this._candidates[0]),this._updateTokens(),this.onChange&&this.onChange(),this._menu&&this._menu.remove())),""===this._input.value&&0!==this.values.length&&8===e.keyCode){e.stopPropagation(),e.preventDefault();var n=this.values.pop();this._input.value="string"==typeof n?n:"string"==typeof n.value?n.value:"",this._updateTokens(),this.onChange&&this.onChange(),this._menu&&this._menu.remove()}setTimeout(function(){return t.max>-1&&t.max<=t.values.length&&""!==t._input.value?(e.stopPropagation(),void(t._input.value="")):void t._tokenize()},0)},_onFocusHandler:function(){this._updateTokens(),this._tokenize(),this.addClassName("flagrate-tokenizer-focus")},_onBlurHandler:function(){var e=this;this._input.value="",this._menu&&(this._menu.style.opacity="0",setTimeout(function(){return e._menu.remove()},500)),this.removeClassName("flagrate-tokenizer-focus")}}},{"./button":1,"./element":7,"./menu":10,"./text-input":24,"./util":28}],26:[function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.items||[],n=e.attribute||{};e.id&&(n.id=e.id);var i=new r.Element("div",n);(0,o.extendObject)(i,this),i.addClassName("flagrate flagrate-toolbar"),e.className&&i.addClassName(e.className),e.style&&i.setStyle(e.style);for(var s=0,a=t.length;a>s;s++)i.push(t[s]);return i}function s(e){return new a(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Toolbar=void 0,n.createToolbar=s;var o=e("./util"),r=e("./element"),a=n.Toolbar=i;a.prototype={push:function(e){if("string"==typeof e)new r.Element("hr").insertTo(this);else if(e instanceof HTMLElement)this.insert(e);else{var t=void 0;e.isBorder?t=new r.Element("hr").insertTo(this):(e.element.isFlagrated||(e.element=r.Element.extend(e.element)),t=r.Element.insertTo(e.element,this)),e.key&&(t.dataset._key=e.key)}return this},getElementByKey:function(e){for(var t=this.childNodes,n=0,i=t.length;i>n;n++)if(t[n].dataset._key===e)return t[n];return null},getElements:function(){return this.childNodes||[]}}},{"./element":7,"./util":28}],27:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return new d(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Tutorial=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.createTutorial=s;var r=e("./util"),a=e("./element"),l=e("./button"),u=e("./popover"),c=e("./modal"),d=n.Tutorial=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.onFinish=r.emptyFunction,this.onAbort=r.emptyFunction,this.onClose=r.emptyFunction,this._steps=[],this._index=0,t.steps&&(this._steps=t.steps),t.index&&(this._index=t.index),t.onFinish&&(this.onFinish=t.onFinish),t.onAbort&&(this.onAbort=t.onAbort),t.onClose&&(this.onClose=t.onClose)}return o(e,[{key:"visible",value:function(){return!!this._popover||!!this._modal||!!this._inStep}},{key:"open",value:function(){return this.visible()===!1&&this._main(),this}},{key:"close",value:function(){return this.visible()===!0&&this._afterStep(this.onClose.bind(this)),this}},{key:"abort",value:function(){return this.visible()===!0&&this._afterStep(this.onAbort.bind(this)),this}},{key:"finish",value:function(){return this._afterStep(this.onFinish.bind(this)),this._index=0,this}},{key:"prev",value:function(){var e=this;return this._afterStep(function(){e._index>0&&--e._index,e._main()}),this}},{key:"next",value:function(){var e=this;return this._afterStep(function(){e._index+1<e._steps.length&&++e._index,e._main()}),this}},{key:"_main",value:function(){this._inStep=!0;var e=this._steps[this._index];if(e.onBeforeStep){if(e.onBeforeStep.length)return e.onBeforeStep.call(this,this._step.bind(this)),this;e.onBeforeStep.call(this)}return this._step(),this}},{key:"_step",value:function(){var e=this,t=this._steps[this._index],n=[];this._index+1>=this._steps.length?n.push({className:"flagrate-tutorial-button-finish",onSelect:function(){e._afterStep(e.finish.bind(e))}}):n.push({className:"flagrate-tutorial-button-next",onSelect:function(){e._afterStep(e.next.bind(e))}}),this._index>0&&n.push({className:"flagrate-tutorial-button-prev",onSelect:function(){e._afterStep(e.prev.bind(e))}}),this._index+1<this._steps.length&&n.push({className:"flagrate-tutorial-button-abort",onSelect:function(){e._afterStep(e.abort.bind(e))}}),n[0].color="@primary";var i=void 0;return"string"==typeof t.target?i=document.querySelector(t.target):a.Element.isElement(t.target)===!0&&(i=t.target),i?!function(){var s=new a.Element,o=new a.Element;t.html&&o.insert(t.html).insertTo(s),t.text&&o.insertText(t.text).insertTo(s);var r=new a.Element("footer").insertTo(s);n.forEach(function(e){new l.Button(e).insertTo(r)}),e._popover=new u.Popover({className:"flagrate-tutorial",element:s}),e._popover.open(i)}():(this._modal=new c.Modal({disableCloseByMask:!0,disableCloseButton:!0,disableCloseByEsc:!0,className:"flagrate-tutorial",title:t.title,text:t.text,html:t.html,buttons:n}),this._modal.open()),t.onStep&&t.onStep.call(this),this}},{key:"_afterStep",value:function(e){this._inStep=!1;var t=!1;if(this._popover&&(t=!0,this._popover.remove(),delete this._popover),this._modal&&(t=!0,this._modal.close(),delete this._modal),t===!0){var n=this._steps[this._index];if(n.onAfterStep){if(n.onAfterStep.length)return n.onAfterStep.call(this,e),this;n.onAfterStep.call(this)}}return e(),this}}]),e}()},{"./button":1,"./element":7,"./modal":11,"./popover":13,"./util":28}],28:[function(e,t,n){"use strict";function i(e){return e}function s(e,t){var n=void 0;for(n in t)e[n]=t[n];return e}function o(){}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n.identity=i,n.extendObject=s,n.emptyFunction=o;var a=n.jsonPointer=void 0;!function(e){function t(e,t){var n=a(e,t);return 0===n.length?e:o(e,n)}function n(e,t,n){if(""===t&&"object"===("undefined"==typeof n?"undefined":r(n)))return s(e,n),n;var i=a(e,t);if(0===i.length)throw new Error("Invalid JSON pointer for set.");return o(e,i,n,!0)}function i(e){return e.replace(/~[01]/g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw new Error("Invalid tilde escape: "+e)})}function o(e,t,n,s){var a=i(t.shift());if(/^\d+$/.test(a)&&(a=parseInt(a,10)),0!==t.length){if(s&&"object"!==r(e[a])){if(void 0===n)return n;/^\d+$/.test(t[0])?e[a]=[]:e[a]={}}return o(e[a],t,n,s)}return s?(void 0===n?delete e[a]:e[a]=n,n):e[a]}function a(e,t){if("object"!==("undefined"==typeof e?"undefined":r(e)))throw new Error("Invalid input object.");if(""===t)return[];if(!t)throw new Error("Invalid JSON pointer.");var n=t.split("/");if(""!==n.shift())throw new Error("Invalid JSON pointer.");return n}e.get=t,e.set=n}(a||(n.jsonPointer=a={}))},{}],29:[function(e,t,n){/*!
   Copyright 2016 Webnium

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.Flagrate=void 0;var s=e("./flagrate/util"),o=i(s),r=e("./flagrate/element"),a=i(r),l=e("./flagrate/button"),u=i(l),c=e("./flagrate/buttons"),d=i(c),h=e("./flagrate/menu"),f=i(h),m=e("./flagrate/pulldown"),p=i(m),g=e("./flagrate/text-input"),_=i(g),v=e("./flagrate/tokenizer"),b=i(v),y=e("./flagrate/text-area"),w=i(y),k=e("./flagrate/combo-box"),x=i(k),C=e("./flagrate/select"),N=i(C),S=e("./flagrate/context-menu"),E=i(S),T=e("./flagrate/toolbar"),O=i(T),H=e("./flagrate/search-box"),P=i(H),L=e("./flagrate/checkbox"),I=i(L),M=e("./flagrate/checkboxes"),B=i(M),A=e("./flagrate/radio"),R=i(A),V=e("./flagrate/radios"),D=i(V),j=e("./flagrate/switch"),F=i(j),z=e("./flagrate/progress"),W=i(z),q=e("./flagrate/slider"),K=i(q),U=e("./flagrate/tab"),X=i(U),Y=e("./flagrate/popover"),$=i(Y),G=e("./flagrate/tutorial"),J=i(G),Q=e("./flagrate/notify"),Z=i(Q),ee=e("./flagrate/modal"),te=i(ee),ne=e("./flagrate/grid"),ie=i(ne),se=e("./flagrate/form"),oe=i(se),re=n.Flagrate=void 0;!function(e){e.identity=o.identity,e.extendObject=o.extendObject,e.emptyFunction=o.emptyFunction,e.jsonPointer=o.jsonPointer,e.Element=a.Element,e.createElement=a.createElement,e.Button=u.Button,e.createButton=u.createButton,e.Buttons=d.Buttons,e.createButtons=d.createButtons,e.Menu=f.Menu,e.createMenu=f.createMenu,e.Pulldown=p.Pulldown,e.createPulldown=p.createPulldown,e.TextInput=_.TextInput,e.createTextInput=_.createTextInput,e.Tokenizer=b.Tokenizer,e.createTokenizer=b.createTokenizer,e.TextArea=w.TextArea,e.createTextArea=w.createTextArea,e.ComboBox=x.ComboBox,e.createComboBox=x.createComboBox,e.Select=N.Select,e.createSelect=N.createSelect,e.ContextMenu=E.ContextMenu,e.createContextMenu=E.createContextMenu,e.Toolbar=O.Toolbar,e.createToolbar=O.createToolbar,e.SearchBox=P.SearchBox,e.createSearchBox=P.createSearchBox,e.Checkbox=I.Checkbox,e.createCheckbox=I.createCheckbox,e.Checkboxes=B.Checkboxes,e.createCheckboxes=B.createCheckboxes,e.Radio=R.Radio,e.createRadio=R.createRadio,e.Radios=D.Radios,e.createRadios=D.createRadios,e.Switch=F.Switch,e.createSwitch=F.createSwitch,e.Progress=W.Progress,e.createProgress=W.createProgress,e.Slider=K.Slider,e.createSlider=K.createSlider,e.Tab=X.Tab,e.createTab=X.createTab,e.Popover=$.Popover,e.createPopover=$.createPopover,e.Tutorial=J.Tutorial,e.createTutorial=J.createTutorial,e.Notify=Z.Notify,e.createNotify=Z.createNotify,e.Modal=te.Modal,e.createModal=te.createModal,e.Grid=ie.Grid,e.createGrid=ie.createGrid,e.Form=oe.Form,e.createForm=oe.createForm}(re||(n.Flagrate=re={})),void 0===window.flagrate&&(window.flagrate=re),n["default"]=re},{"./flagrate/button":1,"./flagrate/buttons":2,"./flagrate/checkbox":3,"./flagrate/checkboxes":4,"./flagrate/combo-box":5,"./flagrate/context-menu":6,"./flagrate/element":7,"./flagrate/form":8,"./flagrate/grid":9,"./flagrate/menu":10,"./flagrate/modal":11,"./flagrate/notify":12,"./flagrate/popover":13,"./flagrate/progress":14,"./flagrate/pulldown":15,"./flagrate/radio":16,"./flagrate/radios":17,"./flagrate/search-box":18,"./flagrate/select":19,"./flagrate/slider":20,"./flagrate/switch":21,"./flagrate/tab":22,"./flagrate/text-area":23,"./flagrate/text-input":24,"./flagrate/tokenizer":25,"./flagrate/toolbar":26,"./flagrate/tutorial":27,"./flagrate/util":28}]},{},[29]);
//# sourceMappingURL=flagrate.min.js.map
